(function(){"use strict";var e={5404:function(e,s,t){var a=t(5130),i=t(6768);const l={id:"app",class:"is-flex is-flex-direction-column"},n=(0,i.Lk)("div",{class:"background-panel has-background-warning-70"},null,-1);function o(e,s,t,a,o,r){const c=(0,i.g2)("NavbarTop"),d=(0,i.g2)("router-view"),u=(0,i.g2)("FooterBottom");return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.bF)(c),n,(0,i.bF)(d,{class:"mt-5",style:{height:"1000px"}}),(0,i.bF)(u)])}const r=e=>((0,i.Qi)("data-v-0118adfc"),e=e(),(0,i.jt)(),e),c={class:"navbar is-warning has-background-warning-65"},d=r((()=>(0,i.Lk)("div",{class:"navbar-brand"},null,-1))),u={class:"navbar-menu"},m=r((()=>(0,i.Lk)("div",{class:"navbar-start",style:{"min-width":"300px"}},null,-1))),p={class:"navbar-center"},v=["src"],h={class:"navbar-end",style:{"min-width":"300px"}},f={class:"navbar-item"},k={class:"buttons"},g=["href"],L=r((()=>(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fa-solid fa-download"})],-1))),w=r((()=>(0,i.Lk)("span",{class:"has-text-weight-semibold"},"다운로드",-1))),x=[L,w];function b(e,s,t,a,l,n){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("nav",c,[d,(0,i.Lk)("div",u,[m,(0,i.Lk)("div",p,[(0,i.bF)(o,{to:"/",class:"navbar-item",style:{padding:"0"}},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:l.logoImage,style:{"max-height":"70px"}},null,8,v)])),_:1}),(0,i.bF)(o,{to:"/",class:"navbar-item is-size-5 has-text-dark has-text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.eW)("홈")])),_:1}),(0,i.bF)(o,{to:"/RoomSetting",class:"navbar-item is-size-5 has-text-dark has-text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.eW)("방 만들기")])),_:1}),(0,i.bF)(o,{to:"/Friend",class:"navbar-item is-size-5 has-text-dark has-text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.eW)("친구")])),_:1}),(0,i.bF)(o,{to:"/UserSetting",class:"navbar-item is-size-5 has-text-dark has-text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.eW)("설정")])),_:1})]),(0,i.Lk)("div",h,[(0,i.Lk)("div",f,[(0,i.Lk)("div",k,[(0,i.Lk)("a",{class:"button",href:l.fileUrl,download:""},x,8,g)])])])])])}var y=t(6400),R=t(9675),C=t(2621),I=t(7844);const _={apiKey:"AIzaSyDGCoRSq1X7ZXiDn-vdsA9dgsNfPjiBaxA",authDomain:"lidge-d70e4.firebaseapp.com",projectId:"lidge-d70e4",storageBucket:"lidge-d70e4.appspot.com",messagingSenderId:"201160863342",appId:"1:201160863342:web:c0c62b53a6ff7fe8bf007f",measurementId:"G-CK6J6DHVWR"},E=(0,y.Wp)(_),F=(0,R.aU)(E),P=(0,C.xI)(E),U=(0,I.c7)(E);var X={name:"NavbarTop",data(){return{logoImage:t(8560),fileUrl:""}},mounted(){this.getFileUrl()},methods:{async getFileUrl(){try{const e=(0,I.KR)(U,"LidgeBuild.zip"),s=await(0,I.qk)(e);this.fileUrl=s}catch(e){console.error("파일 URL을 가져오는 중 오류 발생:",e)}}}},j=t(1241);const G=(0,j.A)(X,[["render",b],["__scopeId","data-v-0118adfc"]]);var K=G;const J=e=>((0,i.Qi)("data-v-438465f2"),e=e(),(0,i.jt)(),e),M={class:"footer footer-panel mt-5"},q=J((()=>(0,i.Lk)("div",{class:"content has-text-centered"},[(0,i.Lk)("div",null," © 2024 Swamp of Bugs. All Rights Reserved. ")],-1))),A=[q];function H(e,s,t,a,l,n){return(0,i.uX)(),(0,i.CE)("footer",M,A)}var V={name:"FooterBottom"};const z=(0,j.A)(V,[["render",H],["__scopeId","data-v-438465f2"]]);var S=z,Q={name:"App",components:{NavbarTop:K,FooterBottom:S}};const D=(0,j.A)(Q,[["render",o]]);var O=D,N=t(1387);const B=e=>((0,i.Qi)("data-v-51d95a20"),e=e(),(0,i.jt)(),e),Z={class:"container is-max-desktop"},$={class:"columns"},T={class:"column is-8"},W={class:"panel pb-4"},Y=B((()=>(0,i.Lk)("p",{class:"panel-heading"},"진행중인 방",-1))),ee={class:"column is-4 is-flex is-flex-direction-column pr-0"},se={class:"panel p-4",style:{height:"250px"}},te={class:"panel p-4 is-flex-grow-1"},ae={class:"panel"},ie=B((()=>(0,i.Lk)("p",{class:"panel-heading"},"내가 만든 방",-1)));function le(e,s,t,a,l,n){const o=(0,i.g2)("RoomList"),r=(0,i.g2)("LoginBox"),c=(0,i.g2)("UserBox"),d=(0,i.g2)("FriendList"),u=(0,i.g2)("MyRoom");return(0,i.uX)(),(0,i.CE)("div",Z,[(0,i.Lk)("div",$,[(0,i.Lk)("div",T,[(0,i.Lk)("div",W,[Y,(0,i.bF)(o)])]),(0,i.Lk)("div",ee,[(0,i.Lk)("div",se,[a.isLoggedIn?((0,i.uX)(),(0,i.Wv)(c,{key:1})):((0,i.uX)(),(0,i.Wv)(r,{key:0}))]),(0,i.Lk)("div",te,[(0,i.bF)(d)])])]),(0,i.Lk)("div",ae,[ie,(0,i.bF)(u,{class:"px-4 py-4"})])])}t(4114);var ne=t(144);const oe={class:"field"},re=(0,i.Lk)("label",{class:"label"},"이메일",-1),ce={class:"control"},de={class:"field"},ue=(0,i.Lk)("label",{class:"label"},"비밀번호",-1),me={class:"control"},pe=(0,i.Lk)("button",{type:"submit",class:"button is-danger"},[(0,i.Lk)("p",{class:"has-text-weight-semibold"},"로그인")],-1),ve=["onClick"],he=(0,i.Lk)("p",{class:"has-text-weight-semibold"},"회원가입",-1),fe=[he];function ke(e,s,t,l,n,o){const r=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("form",{class:"login",onSubmit:s[2]||(s[2]=(0,a.D$)((e=>o.login(n.email,n.password)),["prevent"]))},[(0,i.Lk)("div",oe,[re,(0,i.Lk)("div",ce,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"email",placeholder:"이메일 입력","onUpdate:modelValue":s[0]||(s[0]=e=>n.email=e)},null,512),[[a.Jo,n.email]])])]),(0,i.Lk)("div",de,[ue,(0,i.Lk)("div",me,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password",placeholder:"비밀번호 입력","onUpdate:modelValue":s[1]||(s[1]=e=>n.password=e)},null,512),[[a.Jo,n.password]])])]),pe,(0,i.bF)(r,{to:"/createAccount"},{default:(0,i.k6)((({navigate:e})=>[(0,i.Lk)("button",{class:"button is-light ml-3",onClick:e},fe,8,ve)])),_:1})],32)}var ge={name:"LoginBox",data(){return{email:"",password:""}},methods:{login(e,s){(0,C.x9)(P,e,s).then((e=>{console.log("Login successful",e.user)})).catch((e=>{console.error("Login failed",e),alert("입력하신 정보가 잘못되었습니다")}))}}};const Le=(0,j.A)(ge,[["render",ke]]);var we=Le,xe=t(4232);const be={class:"is-flex is-align-items-center is-flex-direction-column is-justify-content-center"},ye={class:"image"},Re=["src"],Ce={class:"mt-3"},Ie=(0,i.Lk)("p",{class:"has-text-weight-semibold"},"로그아웃",-1),_e=[Ie];function Ee(e,s,t,a,l,n){return(0,i.uX)(),(0,i.CE)("div",be,[(0,i.Lk)("figure",ye,[(0,i.Lk)("img",{class:"is-rounded",src:a.userPhotoURL||"https://via.placeholder.com/128x128.png?text=Image",alt:"User photo",style:{width:"128px",height:"128px","object-fit":"cover"}},null,8,Re)]),(0,i.Lk)("p",Ce,"환영합니다, "+(0,xe.v_)(a.userName)+"!",1),(0,i.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>a.logout&&a.logout(...e)),class:"button is-light mt-2"},_e)])}var Fe={name:"UserBox",setup(){const e=(0,N.rd)(),s=(0,ne.KR)(""),t=(0,ne.KR)(""),a=async e=>{const a=(0,R.H9)(F,"users",e),i=await(0,R.x7)(a);if(i.exists()){const e=i.data();s.value=e.name||e.email,t.value=e.photoURL||""}};(0,i.sV)((()=>{(0,C.hg)(P,(e=>{e&&a(e.uid)}))}));const l=()=>{(0,C.CI)(P).then((()=>{console.log("Logged out successfully"),alert("로그아웃 되었습니다"),e.go(0)})).catch((e=>{console.error("Logout failed",e),alert("로그아웃 실패: "+e.message)}))};return{userName:s,userPhotoURL:t,logout:l}}};const Pe=(0,j.A)(Fe,[["render",Ee]]);var Ue=Pe;const Xe=e=>((0,i.Qi)("data-v-54457d8d"),e=e(),(0,i.jt)(),e),je={class:"field is-grouped is-flex is-flex is-align-items-center is-justify-content-center is-a mt-4 mb-0"},Ge={class:"control"},Ke={class:"radio"},Je={class:"control"},Me={class:"radio"},qe={class:"room-list"},Ae={class:"texts"},He={class:"is-size-4 has-text-weight-semibold has-text-left"},Ve={class:"has-text-left"},ze={class:"buttons"},Se=["onClick"],Qe=Xe((()=>(0,i.Lk)("p",{class:"has-text-weight-semibold"},"입장",-1))),De=[Qe],Oe=["onClick"],Ne=Xe((()=>(0,i.Lk)("p",{class:"has-text-weight-semibold"},"참가",-1))),Be=[Ne];function Ze(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",je,[(0,i.Lk)("div",Ge,[(0,i.Lk)("label",Ke,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"roomFilter",value:"all","onUpdate:modelValue":s[0]||(s[0]=e=>l.selectedFilter=e)},null,512),[[a.XL,l.selectedFilter]]),(0,i.eW)(" 모든 방 ")])]),(0,i.Lk)("div",Je,[(0,i.Lk)("label",Me,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"roomFilter",value:"my","onUpdate:modelValue":s[1]||(s[1]=e=>l.selectedFilter=e)},null,512),[[a.XL,l.selectedFilter]]),(0,i.eW)(" 내가 속한 방 ")])])]),(0,i.Lk)("div",qe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.filteredRooms,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"box box-light mx-4 my-4 pl-5 is-flex is-justify-content-space-between"},[(0,i.Lk)("div",Ae,[(0,i.Lk)("h2",He,(0,xe.v_)(e.name),1),(0,i.Lk)("p",Ve,(0,xe.v_)(e.participants?.length||0)+"명 입장 중",1)]),(0,i.Lk)("div",ze,[(0,i.Lk)("button",{class:"button is-light",onClick:s=>l.enterRoom(e.id)},De,8,Se),(0,i.Lk)("button",{class:"button is-primary",onClick:s=>l.joinRoom(e.id)},Be,8,Oe)])])))),128))])])}var $e={name:"RoomList",setup(){const e=(0,ne.KR)([]),s=(0,ne.KR)([]),t=(0,ne.KR)(null),a=(0,ne.KR)("all"),l=(0,N.rd)(),n=async()=>{const s=await(0,R.GG)((0,R.rJ)(F,"rooms"));e.value=s.docs.map((e=>({id:e.id,name:e.data().name,participants:e.data().participants||[]})))},o=async()=>{if(t.value){const e=(0,R.H9)(F,"users",t.value.uid),a=await(0,R.x7)(e);if(a.exists()){const e=a.data().joinedRooms||[],t=await Promise.all(e.map((e=>(0,R.x7)((0,R.H9)(F,"rooms",e)))));s.value=t.map((e=>({id:e.id,...e.data()})))}}},r=s=>{if(!t.value)return void alert("로그인이 필요합니다.");const a=e.value.find((e=>e.id===s));a&&a.participants.includes(t.value.uid)?l.push({name:"RoomView",params:{roomId:s}}):alert("방에 참가하지 않았습니다.")},c=async e=>{if(!t.value)return void alert("로그인이 필요합니다.");const s=(0,R.H9)(F,"rooms",e),a=await(0,R.x7)(s);if(a.exists()){const i=a.data();if(i.participants.includes(t.value.uid))return void alert("이미 이 방에 참가하셨습니다.");if(i.password){const e=prompt("비밀번호를 입력하세요:");if(e!==i.password)return void alert("비밀번호가 틀렸습니다.")}if(i.participants.length>=8)return void alert("방의 참가 인원이 가득 찼습니다.");await(0,R.mZ)(s,{participants:(0,R.hq)(t.value.uid)}),await(0,R.mZ)((0,R.H9)(F,"users",t.value.uid),{joinedRooms:(0,R.hq)(e)}),alert("참가되었습니다."),n(),o()}else alert("방을 찾을 수 없습니다.")},d=(0,i.EW)((()=>"all"===a.value?e.value:s.value));return(0,i.sV)((()=>{const e=P.onAuthStateChanged((e=>{e?(t.value=e,o()):t.value=null,n()}));return()=>e()})),{rooms:e,myRooms:s,filteredRooms:d,selectedFilter:a,enterRoom:r,joinRoom:c}}};const Te=(0,j.A)($e,[["render",Ze],["__scopeId","data-v-54457d8d"]]);var We=Te;const Ye=e=>((0,i.Qi)("data-v-5f19f8a2"),e=e(),(0,i.jt)(),e),es=Ye((()=>(0,i.Lk)("p",{class:"has-text-weight-bold"},"친구 목록",-1))),ss={key:0,class:"is-flex is-align-items-center",style:{height:"100%"}},ts=Ye((()=>(0,i.Lk)("div",{class:"is-flex-grow-1"},[(0,i.Lk)("p",{class:"is-size-5 has-text-grey"},"로그인 해주세요")],-1))),as=[ts],is={key:1,class:"is-flex is-align-items-center",style:{height:"100%"}},ls=Ye((()=>(0,i.Lk)("div",{class:"is-flex-grow-1"},[(0,i.Lk)("p",{class:"is-size-5 has-text-grey"},"친구가 없습니다")],-1))),ns=[ls],os={key:2,class:"list mt-1",style:{width:"100%"}},rs={class:"is-flex is-align-items-center"},cs={class:"image is-32x32"},ds=["src"],us={class:"ml-3 has-text-weight-semibold"},ms=["onClick"];function ps(e,s,t,a,l,n){return(0,i.uX)(),(0,i.CE)(i.FK,null,[es,a.currentUser?0===a.friends.length?((0,i.uX)(),(0,i.CE)("div",is,ns)):((0,i.uX)(),(0,i.CE)("div",os,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.friends,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"list-item is-flex is-align-items-center is-justify-content-space-between"},[(0,i.Lk)("div",rs,[(0,i.Lk)("figure",cs,[(0,i.Lk)("img",{class:"is-rounded friend-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=User",alt:"Friend Image"},null,8,ds)])]),(0,i.Lk)("p",us,(0,xe.v_)(e.name),1),(0,i.Lk)("button",{class:"delete",onClick:s=>a.deleteFriend(e.id)},null,8,ms)])))),128))])):((0,i.uX)(),(0,i.CE)("div",ss,as))],64)}var vs={name:"FriendList",setup(){const e=(0,ne.KR)([]),s=(0,ne.KR)(null),t=async()=>{const t=s.value.uid,a=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",t)),i=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId2","==",t)),[l,n]=await Promise.all([(0,R.GG)(a),(0,R.GG)(i)]),o=[...l.docs,...n.docs].map((async e=>{const s=e.data(),a=s.userId1===t?s.userId2:s.userId1,i=(0,R.H9)(F,"users",a),l=await(0,R.x7)(i);if(l.exists()){const e={id:l.id,name:l.data().name,email:l.data().email,photoURL:l.data().photoURL};return e}return null})),r=await Promise.all(o);e.value=r.filter((e=>null!==e))},a=async e=>{const a=s.value.uid;try{const s=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",a),(0,R._M)("userId2","==",e)),i=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",e),(0,R._M)("userId2","==",a)),[l,n]=await Promise.all([(0,R.GG)(s),(0,R.GG)(i)]);for(const e of l.docs)await(0,R.kd)((0,R.H9)(F,"friends",e.id));for(const e of n.docs)await(0,R.kd)((0,R.H9)(F,"friends",e.id));await t()}catch(i){console.error("Error deleting friend: ",i)}};let l=null;const n=()=>{l=P.onAuthStateChanged((async e=>{e?(s.value=e,await t()):s.value=null}))};return(0,i.sV)((()=>{n()})),(0,i.hi)((()=>{l&&l()})),{friends:e,deleteFriend:a,currentUser:s}}};const hs=(0,j.A)(vs,[["render",ps],["__scopeId","data-v-5f19f8a2"]]);var fs=hs;const ks=e=>((0,i.Qi)("data-v-049e9232"),e=e(),(0,i.jt)(),e),gs={class:"is-flex is-flex-direction-column is-align-items-center",style:{height:"300px"}},Ls={key:0,class:"has-text-grey is-flex is-justify-content-center is-align-items-end",style:{height:"100%"}},ws=ks((()=>(0,i.Lk)("p",{class:"is-size-5"},"로딩 중...",-1))),xs=[ws],bs={key:1,class:"has-text-grey is-flex is-justify-content-center is-align-items-center",style:{height:"100%"}},ys=ks((()=>(0,i.Lk)("p",{class:"is-size-5"},"로그인 해주세요",-1))),Rs=[ys],Cs={key:2,class:"has-text-grey is-flex is-justify-content-center is-align-items-center",style:{height:"100%"}},Is=ks((()=>(0,i.Lk)("p",{class:"is-size-5"},"생성한 방이 없습니다",-1))),_s=[Is],Es={key:3,class:"box is-flex is-flex-direction-column is-justify-content-center",style:{height:"100px",width:"100%"}},Fs={class:"is-flex is-align-items-center is-justify-content-center",style:{position:"relative",height:"100%"}},Ps={class:"is-flex-grow-1 has-text-centered"},Us={class:"is-size-4"},Xs={class:"buttons is-flex is-align-items-end",style:{position:"absolute",right:"0rem",top:"50%",transform:"translateY(-50%)"}},js={key:4,class:"table-container"},Gs={class:"table is-fullwidth is-bordered"},Ks=ks((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{class:"has-text-centered"},"이름"),(0,i.Lk)("th",{class:"has-text-centered"},"이메일")])],-1)));function Js(e,s,t,a,l,n){return(0,i.uX)(),(0,i.CE)("div",gs,[a.isAuthChecked?a.currentUser?0===a.rooms.length?((0,i.uX)(),(0,i.CE)("div",Cs,_s)):((0,i.uX)(),(0,i.CE)("div",Es,[(0,i.Lk)("div",Fs,[(0,i.Lk)("div",Ps,[(0,i.Lk)("p",null,[(0,i.Lk)("strong",Us,(0,xe.v_)(a.rooms[0].name),1)]),(0,i.Lk)("p",null,"참여자: "+(0,xe.v_)(a.rooms[0].participants.length)+"명",1)]),(0,i.Lk)("div",Xs,[(0,i.Lk)("button",{class:"button is-light has-text-weight-semibold",onClick:s[0]||(s[0]=e=>a.enterRoom(a.rooms[0].id))},"입장"),(0,i.Lk)("button",{class:"button is-danger has-text-weight-semibold",onClick:s[1]||(s[1]=e=>a.deleteRoom(a.rooms[0].id))},"삭제")])])])):((0,i.uX)(),(0,i.CE)("div",bs,Rs)):((0,i.uX)(),(0,i.CE)("div",Ls,xs)),a.rooms.length>0&&a.rooms[0].participantDetails?((0,i.uX)(),(0,i.CE)("div",js,[(0,i.Lk)("table",Gs,[Ks,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.rooms[0].participantDetails,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,xe.v_)(e.name),1),(0,i.Lk)("td",null,(0,xe.v_)(e.email),1)])))),128))])])])):(0,i.Q3)("",!0)])}var Ms={name:"MyRoom",setup(){const e=(0,ne.KR)([]),s=(0,ne.KR)(null),t=(0,ne.KR)(!1),a=(0,N.rd)(),l=async e=>{const s=await Promise.all(e.map((async e=>{const s=await(0,R.x7)((0,R.H9)(F,"users",e));return s.exists()?{id:s.id,...s.data()}:null})));return s.filter((e=>null!==e))},n=async()=>{if(s.value){const t=(0,R.P)((0,R.rJ)(F,"rooms"),(0,R._M)("ownerId","==",s.value.uid)),a=await(0,R.GG)(t);if(!a.empty){const s=a.docs[0],t=s.data(),i=await l(t.participants);e.value=[{id:s.id,...t,participantDetails:i}]}}},o=async s=>{try{await(0,R.kd)((0,R.H9)(F,"rooms",s)),e.value=[],alert("방이 삭제되었습니다."),location.reload()}catch(t){console.error("Error deleting room:",t),alert("방 삭제에 실패하였습니다.")}},r=e=>{a.push({name:"RoomView",params:{roomId:e}})};return(0,i.sV)((()=>{(0,C.hg)(P,(e=>{t.value=!0,s.value=e,e&&n()}))})),{rooms:e,deleteRoom:o,enterRoom:r,currentUser:s,isAuthChecked:t}}};const qs=(0,j.A)(Ms,[["render",Js],["__scopeId","data-v-049e9232"]]);var As=qs,Hs={name:"HomeView",components:{LoginBox:we,UserBox:Ue,RoomList:We,FriendList:fs,MyRoom:As},setup(){const e=(0,ne.KR)(!1),s=(0,N.rd)();return(0,i.sV)((()=>{(0,C.hg)(P,(t=>{t?e.value=!0:(e.value=!1,s.push("/"))}))})),{isLoggedIn:e}}};const Vs=(0,j.A)(Hs,[["render",le],["__scopeId","data-v-51d95a20"]]);var zs=Vs;const Ss=e=>((0,i.Qi)("data-v-2b3daf28"),e=e(),(0,i.jt)(),e),Qs={class:"container is-max-desktop"},Ds={class:"panel"},Os=Ss((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"방 만들기")],-1))),Ns={class:"panel-block"},Bs={class:"control"},Zs=Ss((()=>(0,i.Lk)("span",{class:"has-text-weight-semibold"},"방 생성",-1))),$s=[Zs],Ts=Ss((()=>(0,i.Lk)("span",{class:"has-text-weight-semibold"},"만들어 놓은 방 지우기",-1))),Ws=[Ts],Ys={class:"columns"},et={class:"column"},st={class:"panel pb-4"},tt=Ss((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"추가된 친구")],-1))),at={key:0,class:"is-flex friend-list is-align-items-center"},it=Ss((()=>(0,i.Lk)("div",{class:"is-flex-grow-1"},[(0,i.Lk)("p",{class:"is-size-5 has-text-grey"},"친구를 추가해주세요")],-1))),lt=[it],nt={key:1,class:"list friend-list"},ot={class:"is-flex is-align-items-center"},rt={class:"image is-64x64"},ct=["src"],dt={class:"list-item-content"},ut={class:"list-item-title is-size-5 has-text-weight-semibold"},mt={class:"list-item-description"},pt=["onClick"],vt={class:"column"},ht={class:"panel pb-4"},ft=Ss((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"친구 목록")],-1))),kt={key:0,class:"is-flex friend-list is-align-items-center"},gt=Ss((()=>(0,i.Lk)("div",{class:"is-flex-grow-1"},[(0,i.Lk)("p",{class:"is-size-5 has-text-grey"},"친구가 없습니다")],-1))),Lt=[gt],wt={key:1,class:"list friend-list"},xt={class:"list-item-image"},bt={class:"image is-64x64"},yt=["src"],Rt={class:"list-item-content"},Ct={class:"list-item-title is-size-5 has-text-weight-semibold"},It={class:"list-item-description"},_t=["onClick"];function Et(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",Qs,[(0,i.Lk)("div",Ds,[Os,(0,i.Lk)("div",Ns,[(0,i.Lk)("div",Bs,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"text",placeholder:"방 이름","onUpdate:modelValue":s[0]||(s[0]=e=>l.roomName=e)},null,512),[[a.Jo,l.roomName]]),(0,i.bo)((0,i.Lk)("input",{class:"input mt-2",type:"password",placeholder:"방 비밀번호 (선택)","onUpdate:modelValue":s[1]||(s[1]=e=>l.roomPassword=e)},null,512),[[a.Jo,l.roomPassword]]),(0,i.Lk)("button",{class:"button is-primary mt-3",onClick:s[2]||(s[2]=(...e)=>l.createRoom&&l.createRoom(...e))},$s),(0,i.Lk)("button",{class:"button is-light mt-3 ml-3",onClick:s[3]||(s[3]=(...e)=>l.removeRoom&&l.removeRoom(...e))},Ws)])])]),(0,i.Lk)("div",Ys,[(0,i.Lk)("div",et,[(0,i.Lk)("div",st,[tt,0===l.joinedFriends.length?((0,i.uX)(),(0,i.CE)("div",at,lt)):((0,i.uX)(),(0,i.CE)("div",nt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.joinedFriends,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-2 mr-2 is-flex is-align-items-center is-justify-content-space-between",key:e.id},[(0,i.Lk)("div",ot,[(0,i.Lk)("figure",rt,[(0,i.Lk)("img",{class:"is-rounded friend-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,ct)])]),(0,i.Lk)("div",dt,[(0,i.Lk)("div",ut,(0,xe.v_)(e.name),1),(0,i.Lk)("div",mt,(0,xe.v_)(e.email),1)]),(0,i.Lk)("button",{class:"delete",onClick:s=>l.removeFriendFromRoom(e.id)},null,8,pt)])))),128))]))])]),(0,i.Lk)("div",vt,[(0,i.Lk)("div",ht,[ft,0===l.availableFriends.length?((0,i.uX)(),(0,i.CE)("div",kt,Lt)):((0,i.uX)(),(0,i.CE)("div",wt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.availableFriends,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-2 mr-2",key:e.id},[(0,i.Lk)("div",xt,[(0,i.Lk)("figure",bt,[(0,i.Lk)("img",{class:"is-rounded friend-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,yt)])]),(0,i.Lk)("div",Rt,[(0,i.Lk)("div",Ct,(0,xe.v_)(e.name),1),(0,i.Lk)("div",It,(0,xe.v_)(e.email),1)]),(0,i.Lk)("button",{class:"button is-danger ml-2",onClick:s=>l.inviteFriendToRoom(e.id)},"추가",8,_t)])))),128))]))])])])])}var Ft={name:"RoomSettingView",setup(){const e=(0,N.rd)(),s=(0,ne.KR)(null),t=(0,ne.KR)(""),a=(0,ne.KR)(""),l=(0,ne.KR)([]),n=(0,ne.KR)([]),o=(0,ne.KR)([]),r=(0,ne.KR)(!0),c=t=>{t?(s.value=t.uid,u()):r.value&&(alert("로그인 해주세요"),e.push("/")),r.value=!1},d=(0,i.EW)((()=>l.value.filter((e=>!n.value.some((s=>s.id===e.id)))))),u=async()=>{const e=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",s.value)),t=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId2","==",s.value)),[a,i]=await Promise.all([(0,R.GG)(e),(0,R.GG)(t)]),n=new Set;a.docs.concat(i.docs).forEach((e=>{const t=e.data();n.add(t.userId1===s.value?t.userId2:t.userId1)}));const o=await Promise.all(Array.from(n).map((async e=>{const s=(0,R.H9)(F,"users",e),t=await(0,R.x7)(s);return t.exists()?{id:e,name:t.data().name,email:t.data().email,photoURL:t.data().photoURL||""}:null})));l.value=o.filter((e=>null!==e))},m=async()=>{if(o.value.length>7)return void alert("참여자 수는 최대 8명을 초과할 수 없습니다. (자신을 포함)");const e=(0,R.P)((0,R.rJ)(F,"rooms"),(0,R._M)("ownerId","==",s.value)),i=await(0,R.GG)(e);if(!i.empty)return void alert("이미 방을 생성하셨습니다.");if(!t.value)return void alert("방 이름을 입력해주세요.");const l=await(0,R.gS)((0,R.rJ)(F,"rooms"),{name:t.value,password:a.value||"",ownerId:s.value,participants:[s.value,...o.value.map((e=>e.id))],timestamp:(0,R.O5)()});await(0,R.mZ)((0,R.H9)(F,"users",s.value),{joinedRooms:(0,R.hq)(l.id)});for(const s of o.value)await(0,R.mZ)((0,R.H9)(F,"users",s.id),{joinedRooms:(0,R.hq)(l.id)});t.value="",a.value="",o.value=[],alert("방이 성공적으로 생성되었습니다.")},p=async()=>{const e=(0,R.P)((0,R.rJ)(F,"rooms"),(0,R._M)("ownerId","==",s.value)),t=await(0,R.GG)(e);if(t.empty)return void alert("삭제할 방이 없습니다.");const a=(0,R.H9)(F,"rooms",t.docs[0].id),i=await(0,R.x7)(a);if(i.exists()){const e=i.data(),s=e.participants;await Promise.all(s.map((async e=>{const s=(0,R.H9)(F,"users",e);await(0,R.mZ)(s,{joinedRooms:(0,R.C3)(a.id)})}))),await(0,R.kd)(a),alert("방이 성공적으로 삭제되었습니다.")}},v=e=>{const s=l.value.find((s=>s.id===e));s&&(n.value.length>=7?alert("이 방은 이미 최대 인원에 도달했습니다."):(n.value.push(s),o.value.push(s),console.log(`${s.name}을(를) 방에 초대했습니다.`)))},h=e=>{n.value=n.value.filter((s=>s.id!==e)),o.value=o.value.filter((s=>s.id!==e)),console.log("친구를 방에서 제거했습니다.")};return(0,i.sV)((()=>{(0,C.hg)(P,(e=>{c(e)}))})),{roomName:t,roomPassword:a,joinedFriends:n,availableFriends:d,inviteFriendToRoom:v,removeFriendFromRoom:h,fetchFriends:u,createRoom:m,removeRoom:p,selectedFriends:o,friends:l}}};const Pt=(0,j.A)(Ft,[["render",Et],["__scopeId","data-v-2b3daf28"]]);var Ut=Pt;const Xt={class:"container is-max-desktop"},jt={class:"panel",style:{height:"665px"}},Gt=(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"유저 설정")],-1),Kt={class:"panel m-5"},Jt={key:0,class:"user-info p-5 is-flex is-justify-content-center"},Mt={class:"is-flex-grow-1 is-flex is-justify-content-center is-align-items-center"},qt={class:"image is-128x128"},At=["src"],Ht={class:"is-flex-grow-4 is-flex is-justify-content-center is-align-items-start is-flex-direction-column"},Vt={class:"is-size-5 has-text-weight-semibold"},zt={class:"is-size-6"},St={class:"is-flex-grow-.5 is-flex is-align-items-center"},Qt={class:"columns ml-3 mr-3 info-setting"},Dt={class:"column"},Ot={class:"box",style:{height:"350px"}},Nt={class:"field"},Bt=(0,i.Lk)("label",{class:"label"},"현재 비밀번호",-1),Zt={class:"control"},$t={class:"field"},Tt=(0,i.Lk)("label",{class:"label"},"새 비밀번호",-1),Wt={class:"control"},Yt={class:"field"},ea=(0,i.Lk)("label",{class:"label"},"새 비밀번호 다시 입력",-1),sa={class:"control"},ta=(0,i.Lk)("div",{class:"field"},[(0,i.Lk)("div",{class:"control"},[(0,i.Lk)("button",{class:"button is-warning has-text-weight-semibold",type:"submit"},"비밀번호 변경")])],-1),aa={class:"column"},ia={class:"box is-flex is-align-items-center is-justify-content-center",style:{height:"350px"}},la={class:"field is-flex is-flex-direction-column is-align-items-center"},na=(0,i.Lk)("label",{class:"label"},"프로필 사진 추가하기",-1),oa={class:"file has-name is-boxed"},ra={class:"file-label"},ca=(0,i.Lk)("span",{class:"file-cta"},[(0,i.Lk)("span",{class:"file-icon"},[(0,i.Lk)("i",{class:"fas fa-upload"})]),(0,i.Lk)("span",{class:"file-label"}," Choose a file… ")],-1),da={key:0,class:"file-name"},ua=(0,i.Lk)("div",{class:"field"},[(0,i.Lk)("div",{class:"control"},[(0,i.Lk)("button",{class:"button is-warning has-text-weight-semibold",type:"submit"},"업로드 하기")])],-1);function ma(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",Xt,[(0,i.Lk)("div",jt,[Gt,(0,i.Lk)("div",Kt,[l.user?((0,i.uX)(),(0,i.CE)("div",Jt,[(0,i.Lk)("div",Mt,[(0,i.Lk)("figure",qt,[(0,i.Lk)("img",{class:"is-rounded",src:l.user.photoURL||"https://via.placeholder.com/128x128.png?text=Image",alt:"User photo",style:{width:"128px",height:"128px","object-fit":"cover"}},null,8,At)])]),(0,i.Lk)("div",Ht,[(0,i.Lk)("p",Vt,(0,xe.v_)(l.user.name),1),(0,i.Lk)("p",zt,(0,xe.v_)(l.user.email),1)]),(0,i.Lk)("div",St,[(0,i.Lk)("button",{class:"button is-danger has-text-weight-semibold",onClick:s[0]||(s[0]=(...e)=>l.deleteAccount&&l.deleteAccount(...e))},"탈퇴하기")])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Qt,[(0,i.Lk)("div",Dt,[(0,i.Lk)("div",Ot,[(0,i.Lk)("form",{onSubmit:s[4]||(s[4]=(0,a.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"]))},[(0,i.Lk)("div",Nt,[Bt,(0,i.Lk)("div",Zt,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>l.currentPassword=e),required:""},null,512),[[a.Jo,l.currentPassword]])])]),(0,i.Lk)("div",$t,[Tt,(0,i.Lk)("div",Wt,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>l.newPassword=e),required:""},null,512),[[a.Jo,l.newPassword]])])]),(0,i.Lk)("div",Yt,[ea,(0,i.Lk)("div",sa,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password","onUpdate:modelValue":s[3]||(s[3]=e=>l.confirmPassword=e),required:""},null,512),[[a.Jo,l.confirmPassword]])])]),ta],32)])]),(0,i.Lk)("div",aa,[(0,i.Lk)("div",ia,[(0,i.Lk)("form",{onSubmit:s[6]||(s[6]=(0,a.D$)(((...e)=>l.uploadPhoto&&l.uploadPhoto(...e)),["prevent"]))},[(0,i.Lk)("div",la,[na,(0,i.Lk)("div",oa,[(0,i.Lk)("label",ra,[(0,i.Lk)("input",{class:"file-input",type:"file",onChange:s[5]||(s[5]=(...e)=>l.onFileChange&&l.onFileChange(...e))},null,32),ca,l.selectedFile?((0,i.uX)(),(0,i.CE)("span",da,(0,xe.v_)(l.selectedFile.name),1)):(0,i.Q3)("",!0)])])]),ua],32)])])])])])}var pa={name:"UserSettingView",setup(){const e=(0,ne.KR)(!0),s=(0,N.rd)(),t=(0,ne.KR)(null),a=(0,ne.KR)(null),l=(0,ne.KR)(""),n=(0,ne.KR)(""),o=(0,ne.KR)(""),r=async e=>{const s=(0,R.H9)(F,"users",e),a=await(0,R.x7)(s);if(a.exists()){const e=a.data();t.value={name:e.name,email:e.email,photoURL:e.photoURL||null}}else console.log("User data does not exist")},c=t=>{t?r(t.uid):e.value&&(alert("로그인 해주세요"),s.push("/")),e.value=!1},d=async()=>{if(n.value.length<6||n.value.length>20)alert("새 비밀번호는 6자 이상 20자 이하여야 합니다.");else if(n.value===o.value)try{const e=P.currentUser;if(e){const s=C.IX.credential(e.email,l.value);await(0,C.kZ)(e,s),await(0,C.f3)(e,n.value),alert("비밀번호가 성공적으로 변경되었습니다.")}}catch(e){console.error("비밀번호 변경 중 오류 발생:",e),alert("비밀번호를 정확히 입력해주세요")}else alert("새 비밀번호와 확인이 일치하지 않습니다.")},u=async()=>{try{const e=P.currentUser;if(e){const t=prompt("현재 비밀번호를 입력하세요:");if(null===t)return;const a=C.IX.credential(e.email,t);await(0,C.kZ)(e,a),await(0,R.kd)((0,R.H9)(F,"users",e.uid));const i=(0,R.P)((0,R.rJ)(F,"rooms"),(0,R._M)("ownerId","==",e.uid)),l=await(0,R.GG)(i);for(const e of l.docs)await(0,R.kd)(e.ref);const n=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",e.uid)),o=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId2","==",e.uid)),[r,c]=await Promise.all([(0,R.GG)(n),(0,R.GG)(o)]);for(const e of r.docs.concat(c.docs))await(0,R.kd)(e.ref);const d=(0,R.P)((0,R.rJ)(F,"friendRequests"),(0,R._M)("senderId","==",e.uid)),u=await(0,R.GG)(d);for(const e of u.docs)await(0,R.kd)(e.ref);const m=(0,R.P)((0,R.rJ)(F,"friendRequests"),(0,R._M)("receiverId","==",e.uid)),p=await(0,R.GG)(m);for(const e of p.docs)await(0,R.kd)(e.ref);const v=(0,R.P)((0,R.rJ)(F,"rooms"),(0,R._M)("participants","array-contains",e.uid)),h=await(0,R.GG)(v);for(const s of h.docs)await(0,R.mZ)(s.ref,{participants:(0,R.C3)(e.uid)});const f=(0,I.KR)(U,`users/${e.uid}/profile.jpg`);await(0,I.XR)(f).catch((e=>{if("storage/object-not-found"!==e.code)throw e})),await(0,C.hG)(e),alert("계정이 성공적으로 삭제되었습니다."),s.push("/")}}catch(e){console.error("계정 삭제 중 오류 발생:",e),alert("계정 삭제 중 오류가 발생했습니다: "+e.message)}},m=e=>{a.value=e.target.files[0]},p=async()=>{if(a.value)try{const e=P.currentUser;if(e){const s=(0,I.KR)(U,`users/${e.uid}/profile.jpg`);await(0,I.D)(s,a.value);const i=await(0,I.qk)(s);await(0,R.mZ)((0,R.H9)(F,"users",e.uid),{photoURL:i}),t.value.photoURL=i,alert("사진이 성공적으로 업로드되었습니다.")}}catch(e){console.error("사진 업로드 중 오류 발생:",e),alert("사진 업로드 중 오류가 발생했습니다: "+e.message)}else alert("파일을 먼저 선택해 주세요")};return(0,i.sV)((()=>{(0,C.hg)(P,(e=>{c(e)}))})),{user:t,currentPassword:l,newPassword:n,confirmPassword:o,selectedFile:a,changePassword:d,deleteAccount:u,onFileChange:m,uploadPhoto:p}}};const va=(0,j.A)(pa,[["render",ma]]);var ha=va;const fa={class:"container",style:{width:"400px"}},ka={class:"box"},ga=(0,i.Lk)("h1",{class:"is-size-4 m-4 has-text-weight-semibold"},"회원가입",-1),La={class:"columns is-centered"},wa={class:"column is-11"},xa={class:"field"},ba=(0,i.Lk)("label",{class:"label"},"이름",-1),ya={class:"control"},Ra={key:0,class:"help is-danger"},Ca={class:"field"},Ia=(0,i.Lk)("label",{class:"label"},"이메일",-1),_a={class:"control"},Ea={key:0,class:"help is-danger"},Fa={class:"field"},Pa=(0,i.Lk)("label",{class:"label"},"비밀번호",-1),Ua={class:"control"},Xa={key:0,class:"help is-danger"},ja={class:"field"},Ga=(0,i.Lk)("label",{class:"label"},"비밀번호 확인",-1),Ka={class:"control"},Ja={key:0,class:"help is-danger"},Ma={class:"field pt-2"},qa={class:"control"},Aa=(0,i.Lk)("button",{class:"button is-danger has-text-weight-semibold",type:"submit"}," 회원가입 ",-1),Ha=["onClick"];function Va(e,s,t,l,n,o){const r=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",fa,[(0,i.Lk)("div",ka,[ga,(0,i.Lk)("div",La,[(0,i.Lk)("div",wa,[(0,i.Lk)("form",{onSubmit:s[4]||(s[4]=(0,a.D$)(((...e)=>o.onSubmit&&o.onSubmit(...e)),["prevent"]))},[(0,i.Lk)("div",xa,[ba,(0,i.Lk)("div",ya,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"text",placeholder:"이름 입력","onUpdate:modelValue":s[0]||(s[0]=e=>n.name=e)},null,512),[[a.Jo,n.name]]),n.errors.name?((0,i.uX)(),(0,i.CE)("p",Ra,(0,xe.v_)(n.errors.name),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Ca,[Ia,(0,i.Lk)("div",_a,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"email",placeholder:"이메일 입력","onUpdate:modelValue":s[1]||(s[1]=e=>n.email=e)},null,512),[[a.Jo,n.email]]),n.errors.email?((0,i.uX)(),(0,i.CE)("p",Ea,(0,xe.v_)(n.errors.email),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Fa,[Pa,(0,i.Lk)("div",Ua,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password",placeholder:"비밀번호 입력","onUpdate:modelValue":s[2]||(s[2]=e=>n.password=e)},null,512),[[a.Jo,n.password]]),n.errors.password?((0,i.uX)(),(0,i.CE)("p",Xa,(0,xe.v_)(n.errors.password),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",ja,[Ga,(0,i.Lk)("div",Ka,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password",placeholder:"비밀번호 재입력","onUpdate:modelValue":s[3]||(s[3]=e=>n.confirmPassword=e)},null,512),[[a.Jo,n.confirmPassword]]),o.passwordMismatch?((0,i.uX)(),(0,i.CE)("p",Ja,"비밀번호가 일치하지 않습니다.")):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Ma,[(0,i.Lk)("div",qa,[Aa,(0,i.bF)(r,{to:"/"},{default:(0,i.k6)((({navigate:e})=>[(0,i.Lk)("button",{class:"button is-light ml-3 has-text-weight-semibold",onClick:e}," 취소 ",8,Ha)])),_:1})])])],32)])])])])}var za={name:"CreateAccountView",data(){return{name:"",email:"",password:"",confirmPassword:"",errors:{name:"",email:"",password:""}}},computed:{passwordMismatch(){return this.password!==this.confirmPassword}},watch:{name(){this.name?this.errors.name="":this.errors.name="이름을 입력해주세요."},email(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.test(this.email)?this.errors.email="":this.errors.email="이메일 형식이 올바르지 않습니다."},password(){this.password.length<6||this.password.length>20?this.errors.password="비밀번호는 6자 이상 20자 이하로 입력해야 합니다.":this.errors.password=""},confirmPassword(){this.confirmPassword&&this.password!==this.confirmPassword?this.errors.confirmPassword="비밀번호가 일치하지 않습니다.":this.errors.confirmPassword=""}},methods:{async onSubmit(){const e=Object.values(this.errors).filter((e=>e)),s=this.email,t=this.password,a=this.name;if(e.length>0||this.passwordMismatch)alert("입력 조건을 만족하지 않습니다: \n"+e.join("\n"));else try{const e=await(0,C.eJ)(P,s,t),i=e.user;await(0,C.r7)(i,{displayName:a}),await(0,R.BN)((0,R.H9)(F,"users",i.uid),{uid:i.uid,email:i.email,name:a}),alert("가입을 환영합니다!"),console.log("User created with name: ",this.name),this.$router.push("/")}catch(i){console.error("Error signing up or updating profile: ",i),"auth/email-already-in-use"===i.code?alert("이미 사용 중인 이메일입니다. 다른 이메일을 사용해 주세요."):alert("회원가입에 실패했습니다: "+i.message)}}}};const Sa=(0,j.A)(za,[["render",Va]]);var Qa=Sa;const Da=e=>((0,i.Qi)("data-v-9552710a"),e=e(),(0,i.jt)(),e),Oa={class:"container is-max-desktop mt-5"},Na={class:"panel pb-4"},Ba=Da((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"친구 검색")],-1))),Za={class:"panel-block"},$a={class:"control has-icons-left"},Ta=Da((()=>(0,i.Lk)("span",{class:"icon is-left"},[(0,i.Lk)("i",{class:"fas fa-search","aria-hidden":"true"})],-1))),Wa={key:0,class:"user-list has-text-grey is-flex is-justify-content-center is-align-items-center"},Ya=Da((()=>(0,i.Lk)("p",{class:"is-size-5"},"찾을 유저를 입력해주세요",-1))),ei=[Ya],si={key:1,class:"list user-list"},ti={class:"list-item-image"},ai={class:"image is-64x64"},ii=["src"],li={class:"list-item-content"},ni={class:"list-item-title is-size-5 has-text-weight-semibold"},oi={class:"list-item-description"},ri=["onClick"],ci=Da((()=>(0,i.Lk)("p",{class:"has-text-weight-semibold"},"친구 요청",-1))),di=[ci],ui={class:"columns"},mi={class:"column"},pi={class:"panel pb-4"},vi=Da((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"친구 리스트")],-1))),hi={key:0,class:"has-text-grey friend-request-list is-flex is-justify-content-center is-align-items-center"},fi=Da((()=>(0,i.Lk)("p",{class:"is-size-5"},"친구가 없습니다",-1))),ki=[fi],gi={key:1,class:"list friend-list"},Li={class:"is-flex is-align-items-center"},wi={class:"image is-64x64"},xi=["src"],bi={class:"list-item-content"},yi={class:"list-item-title is-size-5 has-text-weight-semibold"},Ri={class:"list-item-description"},Ci=["onClick"],Ii={class:"column"},_i={class:"panel pb-4"},Ei=Da((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"친구 요청")],-1))),Fi={key:0,class:"has-text-grey friend-request-list is-flex is-justify-content-center is-align-items-center"},Pi=Da((()=>(0,i.Lk)("p",{class:"is-size-5"},"친구 요청이 없습니다",-1))),Ui=[Pi],Xi={key:1,class:"list friend-request-list"},ji={class:"list-item-image"},Gi={class:"image is-64x64"},Ki=["src"],Ji={class:"list-item-content"},Mi={class:"list-item-title is-size-5 has-text-weight-semibold"},qi={class:"list-item-description"},Ai=["onClick"],Hi=["onClick"];function Vi(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",Oa,[(0,i.Lk)("div",Na,[Ba,(0,i.Lk)("div",Za,[(0,i.Lk)("p",$a,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"text",placeholder:"친구 검색","onUpdate:modelValue":s[0]||(s[0]=e=>l.searchText=e)},null,512),[[a.Jo,l.searchText]]),Ta])]),0===l.filteredUsers.length?((0,i.uX)(),(0,i.CE)("div",Wa,ei)):((0,i.uX)(),(0,i.CE)("div",si,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.filteredUsers,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-4 mr-4",key:e.id},[(0,i.Lk)("div",ti,[(0,i.Lk)("figure",ai,[(0,i.Lk)("img",{class:"is-rounded user-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,ii)])]),(0,i.Lk)("div",li,[(0,i.Lk)("div",ni,(0,xe.v_)(e.name),1),(0,i.Lk)("div",oi,(0,xe.v_)(e.email),1)]),(0,i.Lk)("button",{class:"button is-primary ml-2",onClick:s=>l.sendFriendRequest(e.id)},di,8,ri)])))),128))]))]),(0,i.Lk)("div",ui,[(0,i.Lk)("div",mi,[(0,i.Lk)("div",pi,[vi,0===l.friends.length?((0,i.uX)(),(0,i.CE)("div",hi,ki)):((0,i.uX)(),(0,i.CE)("div",gi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.friends,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-2 mr-2",key:e.id},[(0,i.Lk)("div",Li,[(0,i.Lk)("figure",wi,[(0,i.Lk)("img",{class:"is-rounded friend-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,xi)])]),(0,i.Lk)("div",bi,[(0,i.Lk)("div",yi,(0,xe.v_)(e.name),1),(0,i.Lk)("div",Ri,(0,xe.v_)(e.email),1)]),(0,i.Lk)("button",{class:"delete",onClick:s=>l.deleteFriend(e.id)},null,8,Ci)])))),128))]))])]),(0,i.Lk)("div",Ii,[(0,i.Lk)("div",_i,[Ei,0===l.incomingRequests.length?((0,i.uX)(),(0,i.CE)("div",Fi,Ui)):((0,i.uX)(),(0,i.CE)("div",Xi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.incomingRequests,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-2 mr-2",key:e.id},[(0,i.Lk)("div",ji,[(0,i.Lk)("figure",Gi,[(0,i.Lk)("img",{class:"is-rounded request-image",src:e.senderPhotoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,Ki)])]),(0,i.Lk)("div",Ji,[(0,i.Lk)("div",Mi,(0,xe.v_)(e.senderName),1),(0,i.Lk)("div",qi,(0,xe.v_)(e.senderEmail),1)]),(0,i.Lk)("button",{class:"button is-danger ml-2",onClick:s=>l.acceptRequest(e.id)},"수락",8,Ai),(0,i.Lk)("button",{class:"button is-light ml-2",onClick:s=>l.declineRequest(e.id)},"거절",8,Hi)])))),128))]))])])])])}var zi={name:"FriendView",setup(){const e=(0,N.rd)();let s=null,t=null;const a=(0,ne.KR)(),l=(0,ne.KR)([]),n=(0,ne.KR)(""),o=(0,ne.KR)([]),r=(0,ne.KR)([]),c=()=>{a.value=P.currentUser},d=async()=>{const e=await(0,R.GG)((0,R.rJ)(F,"users"));l.value=e.docs.map((e=>({id:e.id,name:e.data().name,email:e.data().email,photoURL:e.data().photoURL||""}))).filter((e=>e.id!==a.value?.uid))},u=async()=>{const e=a.value.uid,s=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",e)),t=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId2","==",e)),[i,l]=await Promise.all([(0,R.GG)(s),(0,R.GG)(t)]),n=[...i.docs,...l.docs].map((async s=>{const t=s.data(),a=t.userId1===e?t.userId2:t.userId1,i=(0,R.H9)(F,"users",a),l=await(0,R.x7)(i);if(l.exists()){const e={id:l.id,name:l.data().name,email:l.data().email,photoURL:l.data().photoURL||""};return e}return null})),o=await Promise.all(n);r.value=o.filter((e=>null!==e))},m=async e=>{const s=a.value.uid;try{const t=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",s),(0,R._M)("userId2","==",e)),a=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",e),(0,R._M)("userId2","==",s)),[i,l]=await Promise.all([(0,R.GG)(t),(0,R.GG)(a)]);for(const e of i.docs)await(0,R.kd)((0,R.H9)(F,"friends",e.id));for(const e of l.docs)await(0,R.kd)((0,R.H9)(F,"friends",e.id));alert("친구가 삭제되었습니다."),u()}catch(t){console.error("Error deleting friend: ",t),alert("친구 삭제에 실패하였습니다.")}},p=()=>{if(!a.value)return;const e=(0,R.P)((0,R.rJ)(F,"friendRequests"),(0,R._M)("receiverId","==",a.value.uid));t=(0,R.aQ)(e,(async e=>{const s=[];for(const t of e.docs){const e=(0,R.H9)(F,"users",t.data().senderId),a=await(0,R.x7)(e);a.exists()&&s.push({id:t.id,senderId:t.data().senderId,senderName:a.data().name,senderEmail:a.data().email,senderPhotoURL:a.data().photoURL||""})}o.value=s}))},v=(0,i.EW)((()=>""===n.value.trim()?[]:l.value.filter((e=>e.name.toLowerCase().includes(n.value.toLowerCase()))))),h=async e=>{const s=a.value.uid;try{const t=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",s),(0,R._M)("userId2","==",e)),a=(0,R.P)((0,R.rJ)(F,"friends"),(0,R._M)("userId1","==",e),(0,R._M)("userId2","==",s)),[i,l]=await Promise.all([(0,R.GG)(t),(0,R.GG)(a)]);if(i.docs.length>0||l.docs.length>0)return void alert("이미 친구입니다.");const n=(0,R.P)((0,R.rJ)(F,"friendRequests"),(0,R._M)("senderId","==",s),(0,R._M)("receiverId","==",e)),o=await(0,R.GG)(n);if(o.docs.length>0)return void alert("이미 친구 요청을 보냈습니다.");const r=(0,R.P)((0,R.rJ)(F,"friendRequests"),(0,R._M)("senderId","==",e),(0,R._M)("receiverId","==",s)),c=await(0,R.GG)(r);if(c.docs.length>0)return void alert("이 사용자에게 이미 요청이 왔습니다. 요청 목록을 확인해 주세요.");await(0,R.gS)((0,R.rJ)(F,"friendRequests"),{senderId:s,receiverId:e,timestamp:(0,R.O5)()}),alert("친구 요청이 전송되었습니다.")}catch(t){console.error("Error sending friend request: ",t),alert("친구 요청 전송에 실패하였습니다.")}},f=async e=>{try{const s=(0,R.H9)(F,"friendRequests",e),t=await(0,R.x7)(s);if(t.exists()){const{senderId:e,receiverId:a}=t.data(),i={userId1:e,userId2:a};await(0,R.gS)((0,R.rJ)(F,"friends"),i),await(0,R.kd)(s),alert("친구 요청을 수락하였습니다."),u()}}catch(s){console.error("Error accepting friend request: ",s),alert("친구 요청 수락에 실패하였습니다.")}},k=async e=>{try{await(0,R.kd)((0,R.H9)(F,"friendRequests",e)),alert("친구 요청을 거절하였습니다.")}catch(s){console.error("Error declining friend request: ",s),alert("친구 요청 거절에 실패하였습니다.")}},g=s=>{s||(alert("로그인 해주세요"),e.push("/"))};return(0,i.sV)((()=>{c(),d(),s=P.onAuthStateChanged((e=>{a.value=e,g(e),e&&(p(),u())}))})),(0,i.hi)((()=>{s&&s(),t&&t()})),{allUsers:l,currentUser:a,searchText:n,filteredUsers:v,sendFriendRequest:h,incomingRequests:o,acceptRequest:f,declineRequest:k,friends:r,fetchFriends:u,deleteFriend:m}}};const Si=(0,j.A)(zi,[["render",Vi],["__scopeId","data-v-9552710a"]]);var Qi=Si;const Di=e=>((0,i.Qi)("data-v-27d80db8"),e=e(),(0,i.jt)(),e),Oi={class:"container is-max-desktop"},Ni={class:"panel"},Bi={class:"panel-heading is-flex is-align-items-center is-justify-content-center"},Zi=Di((()=>(0,i.Lk)("div",{class:"is-flex-grow-1",style:{width:"10%"}},null,-1))),$i={class:"is-flex-grow-4 has-text-centered"},Ti={class:"has-text-weight-bold is-size-4"},Wi={class:"is-flex-grow-1 has-text-right",style:{width:"10%"}},Yi={key:0,class:"has-text-grey is-flex is-justify-content-center is-align-items-center",style:{height:"100%"}},el=Di((()=>(0,i.Lk)("p",{class:"is-size-5"},"참여자가 없습니다",-1))),sl=[el],tl={class:"columns is-multiline m-2 pb-4"},al={class:"panel-block is-flex is-align-items-center",style:{padding:"0"}},il={key:0,class:"panel is-flex is-align-items-center",style:{width:"100%",height:"100px"}},ll={class:"image is-64x64 ml-5",style:{"margin-right":"15px","margin-left":"15px",position:"relative"}},nl=["src"],ol={key:0,class:"fa-solid fa-crown",style:{position:"absolute",top:"-10px",left:"-10px",color:"gold"}},rl={class:"is-flex-grow-1 is-flex is-flex-direction-column is-align-items-center is-justify-content-center"},cl={class:"is-size-5 has-text-weight-semibold"},dl={class:"is-size-6"},ul={key:1,class:"panel is-flex is-align-items-center is-justify-content-center",style:{width:"100%",height:"100px"}},ml=Di((()=>(0,i.Lk)("p",{class:"has-text-grey"},"유저가 입장하지 않음",-1))),pl=[ml],vl={class:"columns mt-4"},hl={class:"column is-half pt-0"},fl={class:"gallery-section panel p-4",style:{height:"260px"}},kl=Di((()=>(0,i.Lk)("p",{class:"is-size-4 has-text-weight-semibold has-text-centered mb-3"},"갤러리",-1))),gl={class:"columns is-multiline"},Ll={class:"image is-4by3",style:{"margin-bottom":"15px"}},wl=["src"],xl=["onClick"],bl={class:"column is-half pt-0"},yl={class:"upload-section panel p-5",style:{height:"260px"}},Rl={class:"field is-flex is-flex-direction-column is-align-items-center"},Cl=Di((()=>(0,i.Lk)("label",{class:"label"},"갤러리 사진 추가하기",-1))),Il={class:"file has-name is-boxed"},_l={class:"file-label"},El=Di((()=>(0,i.Lk)("span",{class:"file-cta"},[(0,i.Lk)("span",{class:"file-icon"},[(0,i.Lk)("i",{class:"fas fa-upload"})]),(0,i.Lk)("span",{class:"file-label"}," 파일 선택… ")],-1))),Fl={key:0,class:"file-name"},Pl=Di((()=>(0,i.Lk)("div",{class:"field"},[(0,i.Lk)("div",{class:"control"},[(0,i.Lk)("button",{class:"button is-warning has-text-weight-semibold",type:"submit"},"업로드 하기")])],-1)));function Ul(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",Oi,[(0,i.Lk)("div",Ni,[(0,i.Lk)("div",Bi,[Zi,(0,i.Lk)("div",$i,[(0,i.Lk)("p",Ti,"< "+(0,xe.v_)(l.roomName)+" >",1)]),(0,i.Lk)("div",Wi,[(0,i.Lk)("button",{class:"button is-light has-text-weight-bold",onClick:s[0]||(s[0]=(...e)=>l.goToMain&&l.goToMain(...e))},"메인"),l.isOwner?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,class:"button is-danger has-text-weight-bold ml-3",onClick:s[1]||(s[1]=(...e)=>l.confirmLeaveRoom&&l.confirmLeaveRoom(...e))},"방 퇴장"))])]),0===l.participants.length?((0,i.uX)(),(0,i.CE)("div",Yi,sl)):(0,i.Q3)("",!0),(0,i.Lk)("div",tl,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(8,(e=>(0,i.Lk)("div",{key:e,class:"column is-half"},[(0,i.Lk)("div",al,[l.participants[e-1]?((0,i.uX)(),(0,i.CE)("div",il,[(0,i.Lk)("figure",ll,[(0,i.Lk)("img",{class:"is-rounded participant-image",src:l.participants[e-1].photoURL||"https://via.placeholder.com/96x96.png?text=User",alt:"Participant Image"},null,8,nl),l.participants[e-1].id===l.ownerId?((0,i.uX)(),(0,i.CE)("i",ol)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",rl,[(0,i.Lk)("p",cl,(0,xe.v_)(l.participants[e-1].name),1),(0,i.Lk)("p",dl,(0,xe.v_)(l.participants[e-1].email),1)])])):((0,i.uX)(),(0,i.CE)("div",ul,pl))])]))),64))])]),(0,i.Lk)("div",vl,[(0,i.Lk)("div",hl,[(0,i.Lk)("div",fl,[kl,(0,i.Lk)("div",gl,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.galleryImages,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"column is-one-quarter",style:{position:"relative"}},[(0,i.Lk)("figure",Ll,[(0,i.Lk)("img",{src:e.url,alt:"Gallery Image"},null,8,wl),(0,i.Lk)("i",{class:"fa-solid fa-circle-xmark",onClick:s=>l.confirmDelete(e.id,e.name),style:{position:"absolute",top:"0px",right:"0px"}},null,8,xl)])])))),128))])])]),(0,i.Lk)("div",bl,[(0,i.Lk)("div",yl,[(0,i.Lk)("form",{onSubmit:s[3]||(s[3]=(0,a.D$)(((...e)=>l.uploadPhoto&&l.uploadPhoto(...e)),["prevent"]))},[(0,i.Lk)("div",Rl,[Cl,(0,i.Lk)("div",Il,[(0,i.Lk)("label",_l,[(0,i.Lk)("input",{class:"file-input",type:"file",onChange:s[2]||(s[2]=(...e)=>l.onFileChange&&l.onFileChange(...e))},null,32),El,l.selectedFile?((0,i.uX)(),(0,i.CE)("span",Fl,(0,xe.v_)(l.selectedFile.name),1)):(0,i.Q3)("",!0)])])]),Pl],32)])])])])}var Xl={name:"RoomView",props:{roomId:{type:String,required:!0}},setup(e){const s=(0,ne.KR)(""),t=(0,ne.KR)([]),a=(0,ne.KR)([]),l=(0,ne.KR)(null),n=(0,ne.KR)(!1),o=(0,ne.KR)(null),r=(0,N.rd)(),c=async()=>{const i=(0,R.H9)(F,"rooms",e.roomId),l=await(0,R.x7)(i);if(l.exists()){const e=l.data();s.value=e.name,o.value=e.ownerId;const i=await Promise.all(e.participants.map((async e=>{const s=(0,R.H9)(F,"users",e),t=await(0,R.x7)(s);return t.exists()?{id:t.id,...t.data()}:null})));t.value=i.filter((e=>null!==e)),a.value=e.gallery||[],n.value=e.ownerId===P.currentUser.uid}else alert("방을 찾을 수 없습니다."),r.push("/")},d=()=>{r.push("/")},u=async()=>{const s=P.currentUser,t=(0,R.H9)(F,"rooms",e.roomId);await(0,R.mZ)(t,{participants:(0,R.C3)(s.uid)}),await(0,R.mZ)((0,R.H9)(F,"users",s.uid),{joinedRooms:(0,R.C3)(e.roomId)});const a=await(0,R.x7)(t);a.exists()&&0===a.data().participants.length&&await(0,R.kd)(t),r.push("/")},m=e=>{l.value=e.target.files[0]},p=e=>e.replace(/[^a-z0-9_.-]/gi,"_").toLowerCase(),v=async()=>{if(!l.value)return;const s=p(l.value.name),t=(0,I.KR)(U,`rooms/${e.roomId}/${s}`);await(0,I.D)(t,l.value);const i=await(0,I.qk)(t),n=(0,R.H9)(F,"rooms",e.roomId),o={id:Date.now().toString(),url:i,name:s};await(0,R.mZ)(n,{gallery:(0,R.hq)(o)}),a.value.push(o),l.value=null,alert("사진이 업로드 되었습니다.")},h=()=>{confirm("정말 방을 퇴장하시겠습니까?")&&u()},f=(e,s)=>{confirm("이 사진을 삭제하시겠습니까?")&&k(e,s)},k=async(s,t)=>{const i=a.value.find((e=>e.id===s));if(!i)return;const l=(0,I.KR)(U,`rooms/${e.roomId}/${t}`);await(0,I.XR)(l);const n=(0,R.H9)(F,"rooms",e.roomId);await(0,R.mZ)(n,{gallery:(0,R.C3)(i)}),a.value=a.value.filter((e=>e.id!==s)),alert("사진이 삭제되었습니다.")};return(0,i.sV)((()=>{c()})),{roomName:s,participants:t,galleryImages:a,selectedFile:l,onFileChange:m,uploadPhoto:v,confirmDelete:f,deletePhoto:k,leaveRoom:u,isOwner:n,ownerId:o,goToMain:d,confirmLeaveRoom:h}}};const jl=(0,j.A)(Xl,[["render",Ul],["__scopeId","data-v-27d80db8"]]);var Gl=jl;const Kl=[{path:"/",name:"home",component:zs},{path:"/RoomSetting",name:"roomSetting",component:Ut},{path:"/UserSetting",name:"userSetting",component:ha},{path:"/CreateAccount",name:"createAccount",component:Qa},{path:"/Friend",name:"friend",component:Qi},{path:"/room/:roomId",name:"RoomView",component:Gl,props:!0}],Jl=(0,N.aE)({history:(0,N.LA)("/"),routes:Kl});var Ml=Jl;(0,a.Ef)(O).use(Ml).mount("#app")},8560:function(e,s,t){e.exports=t.p+"img/lidgelogo.2d498f33.png"}},s={};function t(a){var i=s[a];if(void 0!==i)return i.exports;var l=s[a]={exports:{}};return e[a].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(s,a,i,l){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],l=e[d][2];for(var o=!0,r=0;r<a.length;r++)(!1&l||n>=l)&&Object.keys(t.O).every((function(e){return t.O[e](a[r])}))?a.splice(r--,1):(o=!1,l<n&&(n=l));if(o){e.splice(d--,1);var c=i();void 0!==c&&(s=c)}}return s}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,i,l]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(s){return 0===e[s]};var s=function(s,a){var i,l,n=a[0],o=a[1],r=a[2],c=0;if(n.some((function(s){return 0!==e[s]}))){for(i in o)t.o(o,i)&&(t.m[i]=o[i]);if(r)var d=r(t)}for(s&&s(a);c<n.length;c++)l=n[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(d)},a=self["webpackChunkvuelearn"]=self["webpackChunkvuelearn"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(5404)}));a=t.O(a)})();
//# sourceMappingURL=app.0283491a.js.map