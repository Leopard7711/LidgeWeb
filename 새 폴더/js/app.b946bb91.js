(function(){"use strict";var e={4992:function(e,s,t){var a=t(5130),i=t(6768);const l={id:"app",class:"is-flex is-flex-direction-column"},n=(0,i.Lk)("div",{class:"background-panel has-background-warning-70"},null,-1);function o(e,s,t,a,o,r){const c=(0,i.g2)("NavbarTop"),d=(0,i.g2)("router-view"),u=(0,i.g2)("FooterBottom");return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.bF)(c),n,(0,i.bF)(d,{class:"mt-5",style:{height:"1000px"}}),(0,i.bF)(u)])}const r=e=>((0,i.Qi)("data-v-0ce1f744"),e=e(),(0,i.jt)(),e),c={class:"navbar is-warning has-background-warning-65"},d=r((()=>(0,i.Lk)("div",{class:"navbar-brand"},null,-1))),u={class:"navbar-menu"},m=r((()=>(0,i.Lk)("div",{class:"navbar-start",style:{"min-width":"300px"}},null,-1))),p={class:"navbar-center"},v=["src"],f=(0,i.Fv)('<div class="navbar-end" style="min-width:300px;" data-v-0ce1f744><div class="navbar-item" data-v-0ce1f744><div class="buttons" data-v-0ce1f744><a class="button" data-v-0ce1f744><span class="icon" data-v-0ce1f744><i class="fa-brands fa-twitter" data-v-0ce1f744></i></span><span class="has-text-weight-semibold" data-v-0ce1f744>트위터</span></a><a class="button" data-v-0ce1f744><span class="icon" data-v-0ce1f744><i class="fa-solid fa-download" data-v-0ce1f744></i></span><span class="has-text-weight-semibold" data-v-0ce1f744>다운로드</span></a></div></div></div>',1);function h(e,s,t,a,l,n){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("nav",c,[d,(0,i.Lk)("div",u,[m,(0,i.Lk)("div",p,[(0,i.bF)(o,{to:"/",class:"navbar-item",style:{padding:"0"}},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:l.logoImage,style:{"max-height":"70px"}},null,8,v)])),_:1}),(0,i.bF)(o,{to:"/",class:"navbar-item is-size-5 has-text-dark has-text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.eW)("홈")])),_:1}),(0,i.bF)(o,{to:"/RoomSetting",class:"navbar-item is-size-5 has-text-dark has-text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.eW)("방 만들기")])),_:1}),(0,i.bF)(o,{to:"/Friend",class:"navbar-item is-size-5 has-text-dark has-text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.eW)("친구")])),_:1}),(0,i.bF)(o,{to:"/UserSetting",class:"navbar-item is-size-5 has-text-dark has-text-weight-bold"},{default:(0,i.k6)((()=>[(0,i.eW)("설정")])),_:1})]),f])])}var k={name:"NavbarTop",data(){return{logoImage:t(8560)}}},g=t(1241);const L=(0,g.A)(k,[["render",h],["__scopeId","data-v-0ce1f744"]]);var w=L;const x=e=>((0,i.Qi)("data-v-438465f2"),e=e(),(0,i.jt)(),e),b={class:"footer footer-panel mt-5"},y=x((()=>(0,i.Lk)("div",{class:"content has-text-centered"},[(0,i.Lk)("div",null," © 2024 Swamp of Bugs. All Rights Reserved. ")],-1))),R=[y];function C(e,s,t,a,l,n){return(0,i.uX)(),(0,i.CE)("footer",b,R)}var I={name:"FooterBottom"};const _=(0,g.A)(I,[["render",C],["__scopeId","data-v-438465f2"]]);var E=_,P={name:"App",components:{NavbarTop:w,FooterBottom:E}};const F=(0,g.A)(P,[["render",o]]);var X=F,U=t(1387);const j=e=>((0,i.Qi)("data-v-51d95a20"),e=e(),(0,i.jt)(),e),G={class:"container is-max-desktop"},K={class:"columns"},J={class:"column is-8"},M={class:"panel pb-4"},q=j((()=>(0,i.Lk)("p",{class:"panel-heading"},"진행중인 방",-1))),A={class:"column is-4 is-flex is-flex-direction-column pr-0"},H={class:"panel p-4",style:{height:"250px"}},V={class:"panel p-4 is-flex-grow-1"},z={class:"panel"},S=j((()=>(0,i.Lk)("p",{class:"panel-heading"},"내가 만든 방",-1)));function Q(e,s,t,a,l,n){const o=(0,i.g2)("RoomList"),r=(0,i.g2)("LoginBox"),c=(0,i.g2)("UserBox"),d=(0,i.g2)("FriendList"),u=(0,i.g2)("MyRoom");return(0,i.uX)(),(0,i.CE)("div",G,[(0,i.Lk)("div",K,[(0,i.Lk)("div",J,[(0,i.Lk)("div",M,[q,(0,i.bF)(o)])]),(0,i.Lk)("div",A,[(0,i.Lk)("div",H,[a.isLoggedIn?((0,i.uX)(),(0,i.Wv)(c,{key:1})):((0,i.uX)(),(0,i.Wv)(r,{key:0}))]),(0,i.Lk)("div",V,[(0,i.bF)(d)])])]),(0,i.Lk)("div",z,[S,(0,i.bF)(u,{class:"px-4 py-4"})])])}t(4114);var D=t(144),O=t(6400),N=t(9675),Z=t(2621),$=t(7844);const B={apiKey:"AIzaSyDGCoRSq1X7ZXiDn-vdsA9dgsNfPjiBaxA",authDomain:"lidge-d70e4.firebaseapp.com",projectId:"lidge-d70e4",storageBucket:"lidge-d70e4.appspot.com",messagingSenderId:"201160863342",appId:"1:201160863342:web:c0c62b53a6ff7fe8bf007f",measurementId:"G-CK6J6DHVWR"},T=(0,O.Wp)(B),W=(0,N.aU)(T),Y=(0,Z.xI)(T),ee=(0,$.c7)(T),se={class:"field"},te=(0,i.Lk)("label",{class:"label"},"이메일",-1),ae={class:"control"},ie={class:"field"},le=(0,i.Lk)("label",{class:"label"},"비밀번호",-1),ne={class:"control"},oe=(0,i.Lk)("button",{type:"submit",class:"button is-danger"},[(0,i.Lk)("p",{class:"has-text-weight-semibold"},"로그인")],-1),re=["onClick"],ce=(0,i.Lk)("p",{class:"has-text-weight-semibold"},"회원가입",-1),de=[ce];function ue(e,s,t,l,n,o){const r=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("form",{class:"login",onSubmit:s[2]||(s[2]=(0,a.D$)((e=>o.login(n.email,n.password)),["prevent"]))},[(0,i.Lk)("div",se,[te,(0,i.Lk)("div",ae,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"email",placeholder:"이메일 입력","onUpdate:modelValue":s[0]||(s[0]=e=>n.email=e)},null,512),[[a.Jo,n.email]])])]),(0,i.Lk)("div",ie,[le,(0,i.Lk)("div",ne,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password",placeholder:"비밀번호 입력","onUpdate:modelValue":s[1]||(s[1]=e=>n.password=e)},null,512),[[a.Jo,n.password]])])]),oe,(0,i.bF)(r,{to:"/createAccount"},{default:(0,i.k6)((({navigate:e})=>[(0,i.Lk)("button",{class:"button is-light ml-3",onClick:e},de,8,re)])),_:1})],32)}var me={name:"LoginBox",data(){return{email:"",password:""}},methods:{login(e,s){(0,Z.x9)(Y,e,s).then((e=>{console.log("Login successful",e.user)})).catch((e=>{console.error("Login failed",e),alert("입력하신 정보가 잘못되었습니다")}))}}};const pe=(0,g.A)(me,[["render",ue]]);var ve=pe,fe=t(4232);const he={class:"is-flex is-align-items-center is-flex-direction-column is-justify-content-center"},ke={class:"image"},ge=["src"],Le={class:"mt-3"},we=(0,i.Lk)("p",{class:"has-text-weight-semibold"},"로그아웃",-1),xe=[we];function be(e,s,t,a,l,n){return(0,i.uX)(),(0,i.CE)("div",he,[(0,i.Lk)("figure",ke,[(0,i.Lk)("img",{class:"is-rounded",src:a.userPhotoURL||"https://via.placeholder.com/128x128.png?text=Image",alt:"User photo",style:{width:"128px",height:"128px","object-fit":"cover"}},null,8,ge)]),(0,i.Lk)("p",Le,"환영합니다, "+(0,fe.v_)(a.userName)+"!",1),(0,i.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>a.logout&&a.logout(...e)),class:"button is-light mt-2"},xe)])}var ye={name:"UserBox",setup(){const e=(0,U.rd)(),s=(0,D.KR)(""),t=(0,D.KR)(""),a=async e=>{const a=(0,N.H9)(W,"users",e),i=await(0,N.x7)(a);if(i.exists()){const e=i.data();s.value=e.name||e.email,t.value=e.photoURL||""}};(0,i.sV)((()=>{(0,Z.hg)(Y,(e=>{e&&a(e.uid)}))}));const l=()=>{(0,Z.CI)(Y).then((()=>{console.log("Logged out successfully"),alert("로그아웃 되었습니다"),e.go(0)})).catch((e=>{console.error("Logout failed",e),alert("로그아웃 실패: "+e.message)}))};return{userName:s,userPhotoURL:t,logout:l}}};const Re=(0,g.A)(ye,[["render",be]]);var Ce=Re;const Ie=e=>((0,i.Qi)("data-v-015ef206"),e=e(),(0,i.jt)(),e),_e={class:"field is-grouped is-flex is-flex is-align-items-center is-justify-content-center is-a mt-4 mb-0"},Ee={class:"control"},Pe={class:"radio"},Fe={class:"control"},Xe={class:"radio"},Ue={class:"room-list"},je={class:"texts"},Ge={class:"is-size-4 has-text-weight-semibold has-text-left"},Ke={class:"has-text-left"},Je={class:"buttons"},Me=["onClick"],qe=Ie((()=>(0,i.Lk)("p",{class:"has-text-weight-semibold"},"입장",-1))),Ae=[qe],He=["onClick"],Ve=Ie((()=>(0,i.Lk)("p",{class:"has-text-weight-semibold"},"참가",-1))),ze=[Ve];function Se(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",_e,[(0,i.Lk)("div",Ee,[(0,i.Lk)("label",Pe,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"roomFilter",value:"all","onUpdate:modelValue":s[0]||(s[0]=e=>l.selectedFilter=e)},null,512),[[a.XL,l.selectedFilter]]),(0,i.eW)(" 모든 방 ")])]),(0,i.Lk)("div",Fe,[(0,i.Lk)("label",Xe,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"roomFilter",value:"my","onUpdate:modelValue":s[1]||(s[1]=e=>l.selectedFilter=e)},null,512),[[a.XL,l.selectedFilter]]),(0,i.eW)(" 내가 속한 방 ")])])]),(0,i.Lk)("div",Ue,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.filteredRooms,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"box box-light mx-4 my-4 pl-5 is-flex is-justify-content-space-between"},[(0,i.Lk)("div",je,[(0,i.Lk)("h2",Ge,(0,fe.v_)(e.name),1),(0,i.Lk)("p",Ke,(0,fe.v_)(e.participants.length)+"명 입장 중",1)]),(0,i.Lk)("div",Je,[(0,i.Lk)("button",{class:"button is-light",onClick:s=>l.enterRoom(e.id)},Ae,8,Me),(0,i.Lk)("button",{class:"button is-primary",onClick:s=>l.joinRoom(e.id)},ze,8,He)])])))),128))])])}var Qe={name:"RoomList",setup(){const e=(0,D.KR)([]),s=(0,D.KR)([]),t=(0,D.KR)(null),a=(0,D.KR)("all"),l=(0,U.rd)(),n=async()=>{const s=await(0,N.GG)((0,N.rJ)(W,"rooms"));e.value=s.docs.map((e=>({id:e.id,name:e.data().name,participants:e.data().participants||[]})))},o=async()=>{if(t.value){const e=(0,N.H9)(W,"users",t.value.uid),a=await(0,N.x7)(e);if(a.exists()){const e=a.data().joinedRooms||[],t=await Promise.all(e.map((e=>(0,N.x7)((0,N.H9)(W,"rooms",e)))));s.value=t.map((e=>({id:e.id,...e.data()})))}}},r=s=>{if(!t.value)return void alert("로그인이 필요합니다.");const a=e.value.find((e=>e.id===s));a&&a.participants.includes(t.value.uid)?l.push({name:"RoomView",params:{roomId:s}}):alert("방에 참가하지 않았습니다.")},c=async e=>{if(!t.value)return void alert("로그인이 필요합니다.");const s=(0,N.H9)(W,"rooms",e),a=await(0,N.x7)(s);if(a.exists()){const i=a.data();if(i.participants.includes(t.value.uid))return void alert("이미 이 방에 참가하셨습니다.");if(i.password){const e=prompt("비밀번호를 입력하세요:");if(e!==i.password)return void alert("비밀번호가 틀렸습니다.")}if(i.participants.length>=8)return void alert("방의 참가 인원이 가득 찼습니다.");await(0,N.mZ)(s,{participants:(0,N.hq)(t.value.uid)}),await(0,N.mZ)((0,N.H9)(W,"users",t.value.uid),{joinedRooms:(0,N.hq)(e)}),alert("참가되었습니다."),n(),o()}else alert("방을 찾을 수 없습니다.")},d=(0,i.EW)((()=>"all"===a.value?e.value:s.value));return(0,i.sV)((()=>{const e=Y.onAuthStateChanged((e=>{e?(t.value=e,o()):t.value=null,n()}));return()=>e()})),{rooms:e,myRooms:s,filteredRooms:d,selectedFilter:a,enterRoom:r,joinRoom:c}}};const De=(0,g.A)(Qe,[["render",Se],["__scopeId","data-v-015ef206"]]);var Oe=De;const Ne=e=>((0,i.Qi)("data-v-5f19f8a2"),e=e(),(0,i.jt)(),e),Ze=Ne((()=>(0,i.Lk)("p",{class:"has-text-weight-bold"},"친구 목록",-1))),$e={key:0,class:"is-flex is-align-items-center",style:{height:"100%"}},Be=Ne((()=>(0,i.Lk)("div",{class:"is-flex-grow-1"},[(0,i.Lk)("p",{class:"is-size-5 has-text-grey"},"로그인 해주세요")],-1))),Te=[Be],We={key:1,class:"is-flex is-align-items-center",style:{height:"100%"}},Ye=Ne((()=>(0,i.Lk)("div",{class:"is-flex-grow-1"},[(0,i.Lk)("p",{class:"is-size-5 has-text-grey"},"친구가 없습니다")],-1))),es=[Ye],ss={key:2,class:"list mt-1",style:{width:"100%"}},ts={class:"is-flex is-align-items-center"},as={class:"image is-32x32"},is=["src"],ls={class:"ml-3 has-text-weight-semibold"},ns=["onClick"];function os(e,s,t,a,l,n){return(0,i.uX)(),(0,i.CE)(i.FK,null,[Ze,a.currentUser?0===a.friends.length?((0,i.uX)(),(0,i.CE)("div",We,es)):((0,i.uX)(),(0,i.CE)("div",ss,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.friends,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"list-item is-flex is-align-items-center is-justify-content-space-between"},[(0,i.Lk)("div",ts,[(0,i.Lk)("figure",as,[(0,i.Lk)("img",{class:"is-rounded friend-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=User",alt:"Friend Image"},null,8,is)])]),(0,i.Lk)("p",ls,(0,fe.v_)(e.name),1),(0,i.Lk)("button",{class:"delete",onClick:s=>a.deleteFriend(e.id)},null,8,ns)])))),128))])):((0,i.uX)(),(0,i.CE)("div",$e,Te))],64)}var rs={name:"FriendList",setup(){const e=(0,D.KR)([]),s=(0,D.KR)(null),t=async()=>{const t=s.value.uid,a=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",t)),i=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId2","==",t)),[l,n]=await Promise.all([(0,N.GG)(a),(0,N.GG)(i)]),o=[...l.docs,...n.docs].map((async e=>{const s=e.data(),a=s.userId1===t?s.userId2:s.userId1,i=(0,N.H9)(W,"users",a),l=await(0,N.x7)(i);if(l.exists()){const e={id:l.id,name:l.data().name,email:l.data().email,photoURL:l.data().photoURL};return e}return null})),r=await Promise.all(o);e.value=r.filter((e=>null!==e))},a=async e=>{const a=s.value.uid;try{const s=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",a),(0,N._M)("userId2","==",e)),i=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",e),(0,N._M)("userId2","==",a)),[l,n]=await Promise.all([(0,N.GG)(s),(0,N.GG)(i)]);for(const e of l.docs)await(0,N.kd)((0,N.H9)(W,"friends",e.id));for(const e of n.docs)await(0,N.kd)((0,N.H9)(W,"friends",e.id));await t()}catch(i){console.error("Error deleting friend: ",i)}};let l=null;const n=()=>{l=Y.onAuthStateChanged((async e=>{e?(s.value=e,await t()):s.value=null}))};return(0,i.sV)((()=>{n()})),(0,i.hi)((()=>{l&&l()})),{friends:e,deleteFriend:a,currentUser:s}}};const cs=(0,g.A)(rs,[["render",os],["__scopeId","data-v-5f19f8a2"]]);var ds=cs;const us=e=>((0,i.Qi)("data-v-049e9232"),e=e(),(0,i.jt)(),e),ms={class:"is-flex is-flex-direction-column is-align-items-center",style:{height:"300px"}},ps={key:0,class:"has-text-grey is-flex is-justify-content-center is-align-items-end",style:{height:"100%"}},vs=us((()=>(0,i.Lk)("p",{class:"is-size-5"},"로딩 중...",-1))),fs=[vs],hs={key:1,class:"has-text-grey is-flex is-justify-content-center is-align-items-center",style:{height:"100%"}},ks=us((()=>(0,i.Lk)("p",{class:"is-size-5"},"로그인 해주세요",-1))),gs=[ks],Ls={key:2,class:"has-text-grey is-flex is-justify-content-center is-align-items-center",style:{height:"100%"}},ws=us((()=>(0,i.Lk)("p",{class:"is-size-5"},"생성한 방이 없습니다",-1))),xs=[ws],bs={key:3,class:"box is-flex is-flex-direction-column is-justify-content-center",style:{height:"100px",width:"100%"}},ys={class:"is-flex is-align-items-center is-justify-content-center",style:{position:"relative",height:"100%"}},Rs={class:"is-flex-grow-1 has-text-centered"},Cs={class:"is-size-4"},Is={class:"buttons is-flex is-align-items-end",style:{position:"absolute",right:"0rem",top:"50%",transform:"translateY(-50%)"}},_s={key:4,class:"table-container"},Es={class:"table is-fullwidth is-bordered"},Ps=us((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{class:"has-text-centered"},"이름"),(0,i.Lk)("th",{class:"has-text-centered"},"이메일")])],-1)));function Fs(e,s,t,a,l,n){return(0,i.uX)(),(0,i.CE)("div",ms,[a.isAuthChecked?a.currentUser?0===a.rooms.length?((0,i.uX)(),(0,i.CE)("div",Ls,xs)):((0,i.uX)(),(0,i.CE)("div",bs,[(0,i.Lk)("div",ys,[(0,i.Lk)("div",Rs,[(0,i.Lk)("p",null,[(0,i.Lk)("strong",Cs,(0,fe.v_)(a.rooms[0].name),1)]),(0,i.Lk)("p",null,"참여자: "+(0,fe.v_)(a.rooms[0].participants.length)+"명",1)]),(0,i.Lk)("div",Is,[(0,i.Lk)("button",{class:"button is-light has-text-weight-semibold",onClick:s[0]||(s[0]=e=>a.enterRoom(a.rooms[0].id))},"입장"),(0,i.Lk)("button",{class:"button is-danger has-text-weight-semibold",onClick:s[1]||(s[1]=e=>a.deleteRoom(a.rooms[0].id))},"삭제")])])])):((0,i.uX)(),(0,i.CE)("div",hs,gs)):((0,i.uX)(),(0,i.CE)("div",ps,fs)),a.rooms.length>0&&a.rooms[0].participantDetails?((0,i.uX)(),(0,i.CE)("div",_s,[(0,i.Lk)("table",Es,[Ps,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.rooms[0].participantDetails,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,fe.v_)(e.name),1),(0,i.Lk)("td",null,(0,fe.v_)(e.email),1)])))),128))])])])):(0,i.Q3)("",!0)])}var Xs={name:"MyRoom",setup(){const e=(0,D.KR)([]),s=(0,D.KR)(null),t=(0,D.KR)(!1),a=(0,U.rd)(),l=async e=>{const s=await Promise.all(e.map((async e=>{const s=await(0,N.x7)((0,N.H9)(W,"users",e));return s.exists()?{id:s.id,...s.data()}:null})));return s.filter((e=>null!==e))},n=async()=>{if(s.value){const t=(0,N.P)((0,N.rJ)(W,"rooms"),(0,N._M)("ownerId","==",s.value.uid)),a=await(0,N.GG)(t);if(!a.empty){const s=a.docs[0],t=s.data(),i=await l(t.participants);e.value=[{id:s.id,...t,participantDetails:i}]}}},o=async s=>{try{await(0,N.kd)((0,N.H9)(W,"rooms",s)),e.value=[],alert("방이 삭제되었습니다."),location.reload()}catch(t){console.error("Error deleting room:",t),alert("방 삭제에 실패하였습니다.")}},r=e=>{a.push({name:"RoomView",params:{roomId:e}})};return(0,i.sV)((()=>{(0,Z.hg)(Y,(e=>{t.value=!0,s.value=e,e&&n()}))})),{rooms:e,deleteRoom:o,enterRoom:r,currentUser:s,isAuthChecked:t}}};const Us=(0,g.A)(Xs,[["render",Fs],["__scopeId","data-v-049e9232"]]);var js=Us,Gs={name:"HomeView",components:{LoginBox:ve,UserBox:Ce,RoomList:Oe,FriendList:ds,MyRoom:js},setup(){const e=(0,D.KR)(!1),s=(0,U.rd)();return(0,i.sV)((()=>{(0,Z.hg)(Y,(t=>{t?e.value=!0:(e.value=!1,s.push("/"))}))})),{isLoggedIn:e}}};const Ks=(0,g.A)(Gs,[["render",Q],["__scopeId","data-v-51d95a20"]]);var Js=Ks;const Ms=e=>((0,i.Qi)("data-v-2b3daf28"),e=e(),(0,i.jt)(),e),qs={class:"container is-max-desktop"},As={class:"panel"},Hs=Ms((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"방 만들기")],-1))),Vs={class:"panel-block"},zs={class:"control"},Ss=Ms((()=>(0,i.Lk)("span",{class:"has-text-weight-semibold"},"방 생성",-1))),Qs=[Ss],Ds=Ms((()=>(0,i.Lk)("span",{class:"has-text-weight-semibold"},"만들어 놓은 방 지우기",-1))),Os=[Ds],Ns={class:"columns"},Zs={class:"column"},$s={class:"panel pb-4"},Bs=Ms((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"추가된 친구")],-1))),Ts={key:0,class:"is-flex friend-list is-align-items-center"},Ws=Ms((()=>(0,i.Lk)("div",{class:"is-flex-grow-1"},[(0,i.Lk)("p",{class:"is-size-5 has-text-grey"},"친구를 추가해주세요")],-1))),Ys=[Ws],et={key:1,class:"list friend-list"},st={class:"is-flex is-align-items-center"},tt={class:"image is-64x64"},at=["src"],it={class:"list-item-content"},lt={class:"list-item-title is-size-5 has-text-weight-semibold"},nt={class:"list-item-description"},ot=["onClick"],rt={class:"column"},ct={class:"panel pb-4"},dt=Ms((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"친구 목록")],-1))),ut={key:0,class:"is-flex friend-list is-align-items-center"},mt=Ms((()=>(0,i.Lk)("div",{class:"is-flex-grow-1"},[(0,i.Lk)("p",{class:"is-size-5 has-text-grey"},"친구가 없습니다")],-1))),pt=[mt],vt={key:1,class:"list friend-list"},ft={class:"list-item-image"},ht={class:"image is-64x64"},kt=["src"],gt={class:"list-item-content"},Lt={class:"list-item-title is-size-5 has-text-weight-semibold"},wt={class:"list-item-description"},xt=["onClick"];function bt(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",qs,[(0,i.Lk)("div",As,[Hs,(0,i.Lk)("div",Vs,[(0,i.Lk)("div",zs,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"text",placeholder:"방 이름","onUpdate:modelValue":s[0]||(s[0]=e=>l.roomName=e)},null,512),[[a.Jo,l.roomName]]),(0,i.bo)((0,i.Lk)("input",{class:"input mt-2",type:"password",placeholder:"방 비밀번호 (선택)","onUpdate:modelValue":s[1]||(s[1]=e=>l.roomPassword=e)},null,512),[[a.Jo,l.roomPassword]]),(0,i.Lk)("button",{class:"button is-primary mt-3",onClick:s[2]||(s[2]=(...e)=>l.createRoom&&l.createRoom(...e))},Qs),(0,i.Lk)("button",{class:"button is-light mt-3 ml-3",onClick:s[3]||(s[3]=(...e)=>l.removeRoom&&l.removeRoom(...e))},Os)])])]),(0,i.Lk)("div",Ns,[(0,i.Lk)("div",Zs,[(0,i.Lk)("div",$s,[Bs,0===l.joinedFriends.length?((0,i.uX)(),(0,i.CE)("div",Ts,Ys)):((0,i.uX)(),(0,i.CE)("div",et,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.joinedFriends,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-2 mr-2 is-flex is-align-items-center is-justify-content-space-between",key:e.id},[(0,i.Lk)("div",st,[(0,i.Lk)("figure",tt,[(0,i.Lk)("img",{class:"is-rounded friend-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,at)])]),(0,i.Lk)("div",it,[(0,i.Lk)("div",lt,(0,fe.v_)(e.name),1),(0,i.Lk)("div",nt,(0,fe.v_)(e.email),1)]),(0,i.Lk)("button",{class:"delete",onClick:s=>l.removeFriendFromRoom(e.id)},null,8,ot)])))),128))]))])]),(0,i.Lk)("div",rt,[(0,i.Lk)("div",ct,[dt,0===l.availableFriends.length?((0,i.uX)(),(0,i.CE)("div",ut,pt)):((0,i.uX)(),(0,i.CE)("div",vt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.availableFriends,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-2 mr-2",key:e.id},[(0,i.Lk)("div",ft,[(0,i.Lk)("figure",ht,[(0,i.Lk)("img",{class:"is-rounded friend-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,kt)])]),(0,i.Lk)("div",gt,[(0,i.Lk)("div",Lt,(0,fe.v_)(e.name),1),(0,i.Lk)("div",wt,(0,fe.v_)(e.email),1)]),(0,i.Lk)("button",{class:"button is-danger ml-2",onClick:s=>l.inviteFriendToRoom(e.id)},"추가",8,xt)])))),128))]))])])])])}var yt={name:"RoomSettingView",setup(){const e=(0,U.rd)(),s=(0,D.KR)(null),t=(0,D.KR)(""),a=(0,D.KR)(""),l=(0,D.KR)([]),n=(0,D.KR)([]),o=(0,D.KR)([]),r=(0,D.KR)(!0),c=t=>{t?(s.value=t.uid,u()):r.value&&(alert("로그인 해주세요"),e.push("/")),r.value=!1},d=(0,i.EW)((()=>l.value.filter((e=>!n.value.some((s=>s.id===e.id)))))),u=async()=>{const e=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",s.value)),t=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId2","==",s.value)),[a,i]=await Promise.all([(0,N.GG)(e),(0,N.GG)(t)]),n=new Set;a.docs.concat(i.docs).forEach((e=>{const t=e.data();n.add(t.userId1===s.value?t.userId2:t.userId1)}));const o=await Promise.all(Array.from(n).map((async e=>{const s=(0,N.H9)(W,"users",e),t=await(0,N.x7)(s);return t.exists()?{id:e,name:t.data().name,email:t.data().email,photoURL:t.data().photoURL||""}:null})));l.value=o.filter((e=>null!==e))},m=async()=>{if(o.value.length>7)return void alert("참여자 수는 최대 8명을 초과할 수 없습니다. (자신을 포함)");const e=(0,N.P)((0,N.rJ)(W,"rooms"),(0,N._M)("ownerId","==",s.value)),i=await(0,N.GG)(e);if(!i.empty)return void alert("이미 방을 생성하셨습니다.");if(!t.value)return void alert("방 이름을 입력해주세요.");const l=await(0,N.gS)((0,N.rJ)(W,"rooms"),{name:t.value,password:a.value||"",ownerId:s.value,participants:[s.value,...o.value.map((e=>e.id))],timestamp:(0,N.O5)()});await(0,N.mZ)((0,N.H9)(W,"users",s.value),{joinedRooms:(0,N.hq)(l.id)});for(const s of o.value)await(0,N.mZ)((0,N.H9)(W,"users",s.id),{joinedRooms:(0,N.hq)(l.id)});t.value="",a.value="",o.value=[],alert("방이 성공적으로 생성되었습니다.")},p=async()=>{const e=(0,N.P)((0,N.rJ)(W,"rooms"),(0,N._M)("ownerId","==",s.value)),t=await(0,N.GG)(e);if(t.empty)return void alert("삭제할 방이 없습니다.");const a=(0,N.H9)(W,"rooms",t.docs[0].id),i=await(0,N.x7)(a);if(i.exists()){const e=i.data(),s=e.participants;await Promise.all(s.map((async e=>{const s=(0,N.H9)(W,"users",e);await(0,N.mZ)(s,{joinedRooms:(0,N.C3)(a.id)})}))),await(0,N.kd)(a),alert("방이 성공적으로 삭제되었습니다.")}},v=e=>{const s=l.value.find((s=>s.id===e));s&&(n.value.length>=7?alert("이 방은 이미 최대 인원에 도달했습니다."):(n.value.push(s),o.value.push(s),console.log(`${s.name}을(를) 방에 초대했습니다.`)))},f=e=>{n.value=n.value.filter((s=>s.id!==e)),o.value=o.value.filter((s=>s.id!==e)),console.log("친구를 방에서 제거했습니다.")};return(0,i.sV)((()=>{(0,Z.hg)(Y,(e=>{c(e)}))})),{roomName:t,roomPassword:a,joinedFriends:n,availableFriends:d,inviteFriendToRoom:v,removeFriendFromRoom:f,fetchFriends:u,createRoom:m,removeRoom:p,selectedFriends:o,friends:l}}};const Rt=(0,g.A)(yt,[["render",bt],["__scopeId","data-v-2b3daf28"]]);var Ct=Rt;const It={class:"container is-max-desktop"},_t={class:"panel",style:{height:"665px"}},Et=(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"유저 설정")],-1),Pt={class:"panel m-5"},Ft={key:0,class:"user-info p-5 is-flex is-justify-content-center"},Xt={class:"is-flex-grow-1 is-flex is-justify-content-center is-align-items-center"},Ut={class:"image is-128x128"},jt=["src"],Gt={class:"is-flex-grow-4 is-flex is-justify-content-center is-align-items-start is-flex-direction-column"},Kt={class:"is-size-5 has-text-weight-semibold"},Jt={class:"is-size-6"},Mt={class:"is-flex-grow-.5 is-flex is-align-items-center"},qt={class:"columns ml-3 mr-3 info-setting"},At={class:"column"},Ht={class:"box",style:{height:"350px"}},Vt={class:"field"},zt=(0,i.Lk)("label",{class:"label"},"현재 비밀번호",-1),St={class:"control"},Qt={class:"field"},Dt=(0,i.Lk)("label",{class:"label"},"새 비밀번호",-1),Ot={class:"control"},Nt={class:"field"},Zt=(0,i.Lk)("label",{class:"label"},"새 비밀번호 다시 입력",-1),$t={class:"control"},Bt=(0,i.Lk)("div",{class:"field"},[(0,i.Lk)("div",{class:"control"},[(0,i.Lk)("button",{class:"button is-warning has-text-weight-semibold",type:"submit"},"비밀번호 변경")])],-1),Tt={class:"column"},Wt={class:"box is-flex is-align-items-center is-justify-content-center",style:{height:"350px"}},Yt={class:"field is-flex is-flex-direction-column is-align-items-center"},ea=(0,i.Lk)("label",{class:"label"},"프로필 사진 추가하기",-1),sa={class:"file has-name is-boxed"},ta={class:"file-label"},aa=(0,i.Lk)("span",{class:"file-cta"},[(0,i.Lk)("span",{class:"file-icon"},[(0,i.Lk)("i",{class:"fas fa-upload"})]),(0,i.Lk)("span",{class:"file-label"}," Choose a file… ")],-1),ia={key:0,class:"file-name"},la=(0,i.Lk)("div",{class:"field"},[(0,i.Lk)("div",{class:"control"},[(0,i.Lk)("button",{class:"button is-warning has-text-weight-semibold",type:"submit"},"업로드 하기")])],-1);function na(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",It,[(0,i.Lk)("div",_t,[Et,(0,i.Lk)("div",Pt,[l.user?((0,i.uX)(),(0,i.CE)("div",Ft,[(0,i.Lk)("div",Xt,[(0,i.Lk)("figure",Ut,[(0,i.Lk)("img",{class:"is-rounded",src:l.user.photoURL||"https://via.placeholder.com/128x128.png?text=Image",alt:"User photo",style:{width:"128px",height:"128px","object-fit":"cover"}},null,8,jt)])]),(0,i.Lk)("div",Gt,[(0,i.Lk)("p",Kt,(0,fe.v_)(l.user.name),1),(0,i.Lk)("p",Jt,(0,fe.v_)(l.user.email),1)]),(0,i.Lk)("div",Mt,[(0,i.Lk)("button",{class:"button is-danger has-text-weight-semibold",onClick:s[0]||(s[0]=(...e)=>l.deleteAccount&&l.deleteAccount(...e))},"탈퇴하기")])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",qt,[(0,i.Lk)("div",At,[(0,i.Lk)("div",Ht,[(0,i.Lk)("form",{onSubmit:s[4]||(s[4]=(0,a.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"]))},[(0,i.Lk)("div",Vt,[zt,(0,i.Lk)("div",St,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>l.currentPassword=e),required:""},null,512),[[a.Jo,l.currentPassword]])])]),(0,i.Lk)("div",Qt,[Dt,(0,i.Lk)("div",Ot,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>l.newPassword=e),required:""},null,512),[[a.Jo,l.newPassword]])])]),(0,i.Lk)("div",Nt,[Zt,(0,i.Lk)("div",$t,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password","onUpdate:modelValue":s[3]||(s[3]=e=>l.confirmPassword=e),required:""},null,512),[[a.Jo,l.confirmPassword]])])]),Bt],32)])]),(0,i.Lk)("div",Tt,[(0,i.Lk)("div",Wt,[(0,i.Lk)("form",{onSubmit:s[6]||(s[6]=(0,a.D$)(((...e)=>l.uploadPhoto&&l.uploadPhoto(...e)),["prevent"]))},[(0,i.Lk)("div",Yt,[ea,(0,i.Lk)("div",sa,[(0,i.Lk)("label",ta,[(0,i.Lk)("input",{class:"file-input",type:"file",onChange:s[5]||(s[5]=(...e)=>l.onFileChange&&l.onFileChange(...e))},null,32),aa,l.selectedFile?((0,i.uX)(),(0,i.CE)("span",ia,(0,fe.v_)(l.selectedFile.name),1)):(0,i.Q3)("",!0)])])]),la],32)])])])])])}var oa={name:"UserSettingView",setup(){const e=(0,D.KR)(!0),s=(0,U.rd)(),t=(0,D.KR)(null),a=(0,D.KR)(null),l=(0,D.KR)(""),n=(0,D.KR)(""),o=(0,D.KR)(""),r=async e=>{const s=(0,N.H9)(W,"users",e),a=await(0,N.x7)(s);if(a.exists()){const e=a.data();t.value={name:e.name,email:e.email,photoURL:e.photoURL||null}}else console.log("User data does not exist")},c=t=>{t?r(t.uid):e.value&&(alert("로그인 해주세요"),s.push("/")),e.value=!1},d=async()=>{if(n.value.length<6||n.value.length>20)alert("새 비밀번호는 6자 이상 20자 이하여야 합니다.");else if(n.value===o.value)try{const e=Y.currentUser;if(e){const s=Z.IX.credential(e.email,l.value);await(0,Z.kZ)(e,s),await(0,Z.f3)(e,n.value),alert("비밀번호가 성공적으로 변경되었습니다.")}}catch(e){console.error("비밀번호 변경 중 오류 발생:",e),alert("비밀번호를 정확히 입력해주세요")}else alert("새 비밀번호와 확인이 일치하지 않습니다.")},u=async()=>{try{const e=Y.currentUser;if(e){const t=prompt("현재 비밀번호를 입력하세요:");if(null===t)return;const a=Z.IX.credential(e.email,t);await(0,Z.kZ)(e,a),await(0,N.kd)((0,N.H9)(W,"users",e.uid));const i=(0,N.P)((0,N.rJ)(W,"rooms"),(0,N._M)("ownerId","==",e.uid)),l=await(0,N.GG)(i);for(const e of l.docs)await(0,N.kd)(e.ref);const n=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",e.uid)),o=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId2","==",e.uid)),[r,c]=await Promise.all([(0,N.GG)(n),(0,N.GG)(o)]);for(const e of r.docs.concat(c.docs))await(0,N.kd)(e.ref);const d=(0,N.P)((0,N.rJ)(W,"friendRequests"),(0,N._M)("senderId","==",e.uid)),u=await(0,N.GG)(d);for(const e of u.docs)await(0,N.kd)(e.ref);const m=(0,N.P)((0,N.rJ)(W,"friendRequests"),(0,N._M)("receiverId","==",e.uid)),p=await(0,N.GG)(m);for(const e of p.docs)await(0,N.kd)(e.ref);const v=(0,N.P)((0,N.rJ)(W,"rooms"),(0,N._M)("participants","array-contains",e.uid)),f=await(0,N.GG)(v);for(const s of f.docs)await(0,N.mZ)(s.ref,{participants:(0,N.C3)(e.uid)});const h=(0,$.KR)(ee,`users/${e.uid}/profile.jpg`);await(0,$.XR)(h).catch((e=>{if("storage/object-not-found"!==e.code)throw e})),await(0,Z.hG)(e),alert("계정이 성공적으로 삭제되었습니다."),s.push("/")}}catch(e){console.error("계정 삭제 중 오류 발생:",e),alert("계정 삭제 중 오류가 발생했습니다: "+e.message)}},m=e=>{a.value=e.target.files[0]},p=async()=>{if(a.value)try{const e=Y.currentUser;if(e){const s=(0,$.KR)(ee,`users/${e.uid}/profile.jpg`);await(0,$.D)(s,a.value);const i=await(0,$.qk)(s);await(0,N.mZ)((0,N.H9)(W,"users",e.uid),{photoURL:i}),t.value.photoURL=i,alert("사진이 성공적으로 업로드되었습니다.")}}catch(e){console.error("사진 업로드 중 오류 발생:",e),alert("사진 업로드 중 오류가 발생했습니다: "+e.message)}else alert("파일을 먼저 선택해 주세요")};return(0,i.sV)((()=>{(0,Z.hg)(Y,(e=>{c(e)}))})),{user:t,currentPassword:l,newPassword:n,confirmPassword:o,selectedFile:a,changePassword:d,deleteAccount:u,onFileChange:m,uploadPhoto:p}}};const ra=(0,g.A)(oa,[["render",na]]);var ca=ra;const da={class:"container",style:{width:"400px"}},ua={class:"box"},ma=(0,i.Lk)("h1",{class:"is-size-4 m-4 has-text-weight-semibold"},"회원가입",-1),pa={class:"columns is-centered"},va={class:"column is-11"},fa={class:"field"},ha=(0,i.Lk)("label",{class:"label"},"이름",-1),ka={class:"control"},ga={key:0,class:"help is-danger"},La={class:"field"},wa=(0,i.Lk)("label",{class:"label"},"이메일",-1),xa={class:"control"},ba={key:0,class:"help is-danger"},ya={class:"field"},Ra=(0,i.Lk)("label",{class:"label"},"비밀번호",-1),Ca={class:"control"},Ia={key:0,class:"help is-danger"},_a={class:"field"},Ea=(0,i.Lk)("label",{class:"label"},"비밀번호 확인",-1),Pa={class:"control"},Fa={key:0,class:"help is-danger"},Xa={class:"field pt-2"},Ua={class:"control"},ja=(0,i.Lk)("button",{class:"button is-danger has-text-weight-semibold",type:"submit"}," 회원가입 ",-1),Ga=["onClick"];function Ka(e,s,t,l,n,o){const r=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",da,[(0,i.Lk)("div",ua,[ma,(0,i.Lk)("div",pa,[(0,i.Lk)("div",va,[(0,i.Lk)("form",{onSubmit:s[4]||(s[4]=(0,a.D$)(((...e)=>o.onSubmit&&o.onSubmit(...e)),["prevent"]))},[(0,i.Lk)("div",fa,[ha,(0,i.Lk)("div",ka,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"text",placeholder:"이름 입력","onUpdate:modelValue":s[0]||(s[0]=e=>n.name=e)},null,512),[[a.Jo,n.name]]),n.errors.name?((0,i.uX)(),(0,i.CE)("p",ga,(0,fe.v_)(n.errors.name),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",La,[wa,(0,i.Lk)("div",xa,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"email",placeholder:"이메일 입력","onUpdate:modelValue":s[1]||(s[1]=e=>n.email=e)},null,512),[[a.Jo,n.email]]),n.errors.email?((0,i.uX)(),(0,i.CE)("p",ba,(0,fe.v_)(n.errors.email),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",ya,[Ra,(0,i.Lk)("div",Ca,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password",placeholder:"비밀번호 입력","onUpdate:modelValue":s[2]||(s[2]=e=>n.password=e)},null,512),[[a.Jo,n.password]]),n.errors.password?((0,i.uX)(),(0,i.CE)("p",Ia,(0,fe.v_)(n.errors.password),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",_a,[Ea,(0,i.Lk)("div",Pa,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"password",placeholder:"비밀번호 재입력","onUpdate:modelValue":s[3]||(s[3]=e=>n.confirmPassword=e)},null,512),[[a.Jo,n.confirmPassword]]),o.passwordMismatch?((0,i.uX)(),(0,i.CE)("p",Fa,"비밀번호가 일치하지 않습니다.")):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Xa,[(0,i.Lk)("div",Ua,[ja,(0,i.bF)(r,{to:"/"},{default:(0,i.k6)((({navigate:e})=>[(0,i.Lk)("button",{class:"button is-light ml-3 has-text-weight-semibold",onClick:e}," 취소 ",8,Ga)])),_:1})])])],32)])])])])}var Ja={name:"CreateAccountView",data(){return{name:"",email:"",password:"",confirmPassword:"",errors:{name:"",email:"",password:""}}},computed:{passwordMismatch(){return this.password!==this.confirmPassword}},watch:{name(){this.name?this.errors.name="":this.errors.name="이름을 입력해주세요."},email(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.test(this.email)?this.errors.email="":this.errors.email="이메일 형식이 올바르지 않습니다."},password(){this.password.length<6||this.password.length>20?this.errors.password="비밀번호는 6자 이상 20자 이하로 입력해야 합니다.":this.errors.password=""},confirmPassword(){this.confirmPassword&&this.password!==this.confirmPassword?this.errors.confirmPassword="비밀번호가 일치하지 않습니다.":this.errors.confirmPassword=""}},methods:{async onSubmit(){const e=Object.values(this.errors).filter((e=>e)),s=this.email,t=this.password,a=this.name;if(e.length>0||this.passwordMismatch)alert("입력 조건을 만족하지 않습니다: \n"+e.join("\n"));else try{const e=await(0,Z.eJ)(Y,s,t),i=e.user;await(0,Z.r7)(i,{displayName:a}),await(0,N.BN)((0,N.H9)(W,"users",i.uid),{uid:i.uid,email:i.email,name:a}),alert("가입을 환영합니다!"),console.log("User created with name: ",this.name),this.$router.push("/")}catch(i){console.error("Error signing up or updating profile: ",i),"auth/email-already-in-use"===i.code?alert("이미 사용 중인 이메일입니다. 다른 이메일을 사용해 주세요."):alert("회원가입에 실패했습니다: "+i.message)}}}};const Ma=(0,g.A)(Ja,[["render",Ka]]);var qa=Ma;const Aa=e=>((0,i.Qi)("data-v-9552710a"),e=e(),(0,i.jt)(),e),Ha={class:"container is-max-desktop mt-5"},Va={class:"panel pb-4"},za=Aa((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"친구 검색")],-1))),Sa={class:"panel-block"},Qa={class:"control has-icons-left"},Da=Aa((()=>(0,i.Lk)("span",{class:"icon is-left"},[(0,i.Lk)("i",{class:"fas fa-search","aria-hidden":"true"})],-1))),Oa={key:0,class:"user-list has-text-grey is-flex is-justify-content-center is-align-items-center"},Na=Aa((()=>(0,i.Lk)("p",{class:"is-size-5"},"찾을 유저를 입력해주세요",-1))),Za=[Na],$a={key:1,class:"list user-list"},Ba={class:"list-item-image"},Ta={class:"image is-64x64"},Wa=["src"],Ya={class:"list-item-content"},ei={class:"list-item-title is-size-5 has-text-weight-semibold"},si={class:"list-item-description"},ti=["onClick"],ai=Aa((()=>(0,i.Lk)("p",{class:"has-text-weight-semibold"},"친구 요청",-1))),ii=[ai],li={class:"columns"},ni={class:"column"},oi={class:"panel pb-4"},ri=Aa((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"친구 리스트")],-1))),ci={key:0,class:"has-text-grey friend-request-list is-flex is-justify-content-center is-align-items-center"},di=Aa((()=>(0,i.Lk)("p",{class:"is-size-5"},"친구가 없습니다",-1))),ui=[di],mi={key:1,class:"list friend-list"},pi={class:"is-flex is-align-items-center"},vi={class:"image is-64x64"},fi=["src"],hi={class:"list-item-content"},ki={class:"list-item-title is-size-5 has-text-weight-semibold"},gi={class:"list-item-description"},Li=["onClick"],wi={class:"column"},xi={class:"panel pb-4"},bi=Aa((()=>(0,i.Lk)("p",{class:"panel-heading"},[(0,i.Lk)("span",{class:"has-text-weight-semibold"},"친구 요청")],-1))),yi={key:0,class:"has-text-grey friend-request-list is-flex is-justify-content-center is-align-items-center"},Ri=Aa((()=>(0,i.Lk)("p",{class:"is-size-5"},"친구 요청이 없습니다",-1))),Ci=[Ri],Ii={key:1,class:"list friend-request-list"},_i={class:"list-item-image"},Ei={class:"image is-64x64"},Pi=["src"],Fi={class:"list-item-content"},Xi={class:"list-item-title is-size-5 has-text-weight-semibold"},Ui={class:"list-item-description"},ji=["onClick"],Gi=["onClick"];function Ki(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",Ha,[(0,i.Lk)("div",Va,[za,(0,i.Lk)("div",Sa,[(0,i.Lk)("p",Qa,[(0,i.bo)((0,i.Lk)("input",{class:"input",type:"text",placeholder:"친구 검색","onUpdate:modelValue":s[0]||(s[0]=e=>l.searchText=e)},null,512),[[a.Jo,l.searchText]]),Da])]),0===l.filteredUsers.length?((0,i.uX)(),(0,i.CE)("div",Oa,Za)):((0,i.uX)(),(0,i.CE)("div",$a,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.filteredUsers,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-4 mr-4",key:e.id},[(0,i.Lk)("div",Ba,[(0,i.Lk)("figure",Ta,[(0,i.Lk)("img",{class:"is-rounded user-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,Wa)])]),(0,i.Lk)("div",Ya,[(0,i.Lk)("div",ei,(0,fe.v_)(e.name),1),(0,i.Lk)("div",si,(0,fe.v_)(e.email),1)]),(0,i.Lk)("button",{class:"button is-primary ml-2",onClick:s=>l.sendFriendRequest(e.id)},ii,8,ti)])))),128))]))]),(0,i.Lk)("div",li,[(0,i.Lk)("div",ni,[(0,i.Lk)("div",oi,[ri,0===l.friends.length?((0,i.uX)(),(0,i.CE)("div",ci,ui)):((0,i.uX)(),(0,i.CE)("div",mi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.friends,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-2 mr-2",key:e.id},[(0,i.Lk)("div",pi,[(0,i.Lk)("figure",vi,[(0,i.Lk)("img",{class:"is-rounded friend-image",src:e.photoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,fi)])]),(0,i.Lk)("div",hi,[(0,i.Lk)("div",ki,(0,fe.v_)(e.name),1),(0,i.Lk)("div",gi,(0,fe.v_)(e.email),1)]),(0,i.Lk)("button",{class:"delete",onClick:s=>l.deleteFriend(e.id)},null,8,Li)])))),128))]))])]),(0,i.Lk)("div",wi,[(0,i.Lk)("div",xi,[bi,0===l.incomingRequests.length?((0,i.uX)(),(0,i.CE)("div",yi,Ci)):((0,i.uX)(),(0,i.CE)("div",Ii,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.incomingRequests,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"list-item ml-2 mr-2",key:e.id},[(0,i.Lk)("div",_i,[(0,i.Lk)("figure",Ei,[(0,i.Lk)("img",{class:"is-rounded request-image",src:e.senderPhotoURL||"https://via.placeholder.com/128x128.png?text=Image"},null,8,Pi)])]),(0,i.Lk)("div",Fi,[(0,i.Lk)("div",Xi,(0,fe.v_)(e.senderName),1),(0,i.Lk)("div",Ui,(0,fe.v_)(e.senderEmail),1)]),(0,i.Lk)("button",{class:"button is-danger ml-2",onClick:s=>l.acceptRequest(e.id)},"수락",8,ji),(0,i.Lk)("button",{class:"button is-light ml-2",onClick:s=>l.declineRequest(e.id)},"거절",8,Gi)])))),128))]))])])])])}var Ji={name:"FriendView",setup(){const e=(0,U.rd)();let s=null,t=null;const a=(0,D.KR)(),l=(0,D.KR)([]),n=(0,D.KR)(""),o=(0,D.KR)([]),r=(0,D.KR)([]),c=()=>{a.value=Y.currentUser},d=async()=>{const e=await(0,N.GG)((0,N.rJ)(W,"users"));l.value=e.docs.map((e=>({id:e.id,name:e.data().name,email:e.data().email,photoURL:e.data().photoURL||""}))).filter((e=>e.id!==a.value?.uid))},u=async()=>{const e=a.value.uid,s=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",e)),t=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId2","==",e)),[i,l]=await Promise.all([(0,N.GG)(s),(0,N.GG)(t)]),n=[...i.docs,...l.docs].map((async s=>{const t=s.data(),a=t.userId1===e?t.userId2:t.userId1,i=(0,N.H9)(W,"users",a),l=await(0,N.x7)(i);if(l.exists()){const e={id:l.id,name:l.data().name,email:l.data().email,photoURL:l.data().photoURL||""};return e}return null})),o=await Promise.all(n);r.value=o.filter((e=>null!==e))},m=async e=>{const s=a.value.uid;try{const t=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",s),(0,N._M)("userId2","==",e)),a=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",e),(0,N._M)("userId2","==",s)),[i,l]=await Promise.all([(0,N.GG)(t),(0,N.GG)(a)]);for(const e of i.docs)await(0,N.kd)((0,N.H9)(W,"friends",e.id));for(const e of l.docs)await(0,N.kd)((0,N.H9)(W,"friends",e.id));alert("친구가 삭제되었습니다."),u()}catch(t){console.error("Error deleting friend: ",t),alert("친구 삭제에 실패하였습니다.")}},p=()=>{if(!a.value)return;const e=(0,N.P)((0,N.rJ)(W,"friendRequests"),(0,N._M)("receiverId","==",a.value.uid));t=(0,N.aQ)(e,(async e=>{const s=[];for(const t of e.docs){const e=(0,N.H9)(W,"users",t.data().senderId),a=await(0,N.x7)(e);a.exists()&&s.push({id:t.id,senderId:t.data().senderId,senderName:a.data().name,senderEmail:a.data().email,senderPhotoURL:a.data().photoURL||""})}o.value=s}))},v=(0,i.EW)((()=>""===n.value.trim()?[]:l.value.filter((e=>e.name.toLowerCase().includes(n.value.toLowerCase()))))),f=async e=>{const s=a.value.uid;try{const t=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",s),(0,N._M)("userId2","==",e)),a=(0,N.P)((0,N.rJ)(W,"friends"),(0,N._M)("userId1","==",e),(0,N._M)("userId2","==",s)),[i,l]=await Promise.all([(0,N.GG)(t),(0,N.GG)(a)]);if(i.docs.length>0||l.docs.length>0)return void alert("이미 친구입니다.");const n=(0,N.P)((0,N.rJ)(W,"friendRequests"),(0,N._M)("senderId","==",s),(0,N._M)("receiverId","==",e)),o=await(0,N.GG)(n);if(o.docs.length>0)return void alert("이미 친구 요청을 보냈습니다.");const r=(0,N.P)((0,N.rJ)(W,"friendRequests"),(0,N._M)("senderId","==",e),(0,N._M)("receiverId","==",s)),c=await(0,N.GG)(r);if(c.docs.length>0)return void alert("이 사용자에게 이미 요청이 왔습니다. 요청 목록을 확인해 주세요.");await(0,N.gS)((0,N.rJ)(W,"friendRequests"),{senderId:s,receiverId:e,timestamp:(0,N.O5)()}),alert("친구 요청이 전송되었습니다.")}catch(t){console.error("Error sending friend request: ",t),alert("친구 요청 전송에 실패하였습니다.")}},h=async e=>{try{const s=(0,N.H9)(W,"friendRequests",e),t=await(0,N.x7)(s);if(t.exists()){const{senderId:e,receiverId:a}=t.data(),i={userId1:e,userId2:a};await(0,N.gS)((0,N.rJ)(W,"friends"),i),await(0,N.kd)(s),alert("친구 요청을 수락하였습니다."),u()}}catch(s){console.error("Error accepting friend request: ",s),alert("친구 요청 수락에 실패하였습니다.")}},k=async e=>{try{await(0,N.kd)((0,N.H9)(W,"friendRequests",e)),alert("친구 요청을 거절하였습니다.")}catch(s){console.error("Error declining friend request: ",s),alert("친구 요청 거절에 실패하였습니다.")}},g=s=>{s||(alert("로그인 해주세요"),e.push("/"))};return(0,i.sV)((()=>{c(),d(),s=Y.onAuthStateChanged((e=>{a.value=e,g(e),e&&(p(),u())}))})),(0,i.hi)((()=>{s&&s(),t&&t()})),{allUsers:l,currentUser:a,searchText:n,filteredUsers:v,sendFriendRequest:f,incomingRequests:o,acceptRequest:h,declineRequest:k,friends:r,fetchFriends:u,deleteFriend:m}}};const Mi=(0,g.A)(Ji,[["render",Ki],["__scopeId","data-v-9552710a"]]);var qi=Mi;const Ai=e=>((0,i.Qi)("data-v-1879d679"),e=e(),(0,i.jt)(),e),Hi={class:"container is-max-desktop"},Vi={class:"panel"},zi={class:"panel-heading is-flex is-align-items-center is-justify-content-center"},Si=Ai((()=>(0,i.Lk)("div",{class:"is-flex-grow-1",style:{width:"10%"}},null,-1))),Qi={class:"is-flex-grow-4 has-text-centered"},Di={class:"has-text-weight-bold"},Oi={class:"is-flex-grow-1 has-text-right",style:{width:"10%"}},Ni={key:0,class:"has-text-grey is-flex is-justify-content-center is-align-items-center",style:{height:"100%"}},Zi=Ai((()=>(0,i.Lk)("p",{class:"is-size-5"},"참여자가 없습니다",-1))),$i=[Zi],Bi={class:"columns is-multiline m-2 pb-4"},Ti={class:"panel-block is-flex is-align-items-center",style:{padding:"0"}},Wi={key:0,class:"panel is-flex is-align-items-center",style:{width:"100%",height:"100px"}},Yi={class:"image is-64x64 ml-5",style:{"margin-right":"15px","margin-left":"15px",position:"relative"}},el=["src"],sl={key:0,class:"fa-solid fa-crown",style:{position:"absolute",top:"-10px",left:"-10px",color:"gold"}},tl={class:"is-flex-grow-1 is-flex is-flex-direction-column is-align-items-center is-justify-content-center"},al={class:"is-size-5 has-text-weight-semibold"},il={class:"is-size-6"},ll={key:1,class:"panel is-flex is-align-items-center is-justify-content-center",style:{width:"100%",height:"100px"}},nl=Ai((()=>(0,i.Lk)("p",{class:"has-text-grey"},"유저가 입장하지 않음",-1))),ol=[nl],rl={class:"columns mt-4"},cl={class:"column is-half pt-0"},dl={class:"gallery-section panel p-4",style:{height:"260px"}},ul=Ai((()=>(0,i.Lk)("p",{class:"is-size-4 has-text-weight-semibold has-text-centered mb-3"},"갤러리",-1))),ml={class:"columns is-multiline"},pl={class:"image is-4by3",style:{"margin-bottom":"15px"}},vl=["src"],fl=["onClick"],hl={class:"column is-half pt-0"},kl={class:"upload-section panel p-5",style:{height:"260px"}},gl={class:"field is-flex is-flex-direction-column is-align-items-center"},Ll=Ai((()=>(0,i.Lk)("label",{class:"label"},"갤러리 사진 추가하기",-1))),wl={class:"file has-name is-boxed"},xl={class:"file-label"},bl=Ai((()=>(0,i.Lk)("span",{class:"file-cta"},[(0,i.Lk)("span",{class:"file-icon"},[(0,i.Lk)("i",{class:"fas fa-upload"})]),(0,i.Lk)("span",{class:"file-label"}," 파일 선택… ")],-1))),yl={key:0,class:"file-name"},Rl=Ai((()=>(0,i.Lk)("div",{class:"field"},[(0,i.Lk)("div",{class:"control"},[(0,i.Lk)("button",{class:"button is-warning has-text-weight-semibold",type:"submit"},"업로드 하기")])],-1)));function Cl(e,s,t,l,n,o){return(0,i.uX)(),(0,i.CE)("div",Hi,[(0,i.Lk)("div",Vi,[(0,i.Lk)("div",zi,[Si,(0,i.Lk)("div",Qi,[(0,i.Lk)("p",Di,"< "+(0,fe.v_)(l.roomName)+" >",1)]),(0,i.Lk)("div",Oi,[(0,i.Lk)("button",{class:"button is-light has-text-weight-bold",onClick:s[0]||(s[0]=(...e)=>l.goToMain&&l.goToMain(...e))},"메인"),l.isOwner?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,class:"button is-danger has-text-weight-bold ml-3",onClick:s[1]||(s[1]=(...e)=>l.confirmLeaveRoom&&l.confirmLeaveRoom(...e))},"방 퇴장"))])]),0===l.participants.length?((0,i.uX)(),(0,i.CE)("div",Ni,$i)):(0,i.Q3)("",!0),(0,i.Lk)("div",Bi,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(8,(e=>(0,i.Lk)("div",{key:e,class:"column is-half"},[(0,i.Lk)("div",Ti,[l.participants[e-1]?((0,i.uX)(),(0,i.CE)("div",Wi,[(0,i.Lk)("figure",Yi,[(0,i.Lk)("img",{class:"is-rounded participant-image",src:l.participants[e-1].photoURL||"https://via.placeholder.com/96x96.png?text=User",alt:"Participant Image"},null,8,el),l.participants[e-1].id===l.ownerId?((0,i.uX)(),(0,i.CE)("i",sl)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",tl,[(0,i.Lk)("p",al,(0,fe.v_)(l.participants[e-1].name),1),(0,i.Lk)("p",il,(0,fe.v_)(l.participants[e-1].email),1)])])):((0,i.uX)(),(0,i.CE)("div",ll,ol))])]))),64))])]),(0,i.Lk)("div",rl,[(0,i.Lk)("div",cl,[(0,i.Lk)("div",dl,[ul,(0,i.Lk)("div",ml,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.galleryImages,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"column is-one-quarter",style:{position:"relative"}},[(0,i.Lk)("figure",pl,[(0,i.Lk)("img",{src:e.url,alt:"Gallery Image"},null,8,vl),(0,i.Lk)("i",{class:"fa-solid fa-circle-xmark",onClick:s=>l.confirmDelete(e.id,e.name),style:{position:"absolute",top:"0px",right:"0px"}},null,8,fl)])])))),128))])])]),(0,i.Lk)("div",hl,[(0,i.Lk)("div",kl,[(0,i.Lk)("form",{onSubmit:s[3]||(s[3]=(0,a.D$)(((...e)=>l.uploadPhoto&&l.uploadPhoto(...e)),["prevent"]))},[(0,i.Lk)("div",gl,[Ll,(0,i.Lk)("div",wl,[(0,i.Lk)("label",xl,[(0,i.Lk)("input",{class:"file-input",type:"file",onChange:s[2]||(s[2]=(...e)=>l.onFileChange&&l.onFileChange(...e))},null,32),bl,l.selectedFile?((0,i.uX)(),(0,i.CE)("span",yl,(0,fe.v_)(l.selectedFile.name),1)):(0,i.Q3)("",!0)])])]),Rl],32)])])])])}var Il={name:"RoomView",props:{roomId:{type:String,required:!0}},setup(e){const s=(0,D.KR)(""),t=(0,D.KR)([]),a=(0,D.KR)([]),l=(0,D.KR)(null),n=(0,D.KR)(!1),o=(0,D.KR)(null),r=(0,U.rd)(),c=async()=>{const i=(0,N.H9)(W,"rooms",e.roomId),l=await(0,N.x7)(i);if(l.exists()){const e=l.data();s.value=e.name,o.value=e.ownerId;const i=await Promise.all(e.participants.map((async e=>{const s=(0,N.H9)(W,"users",e),t=await(0,N.x7)(s);return t.exists()?{id:t.id,...t.data()}:null})));t.value=i.filter((e=>null!==e)),a.value=e.gallery||[],n.value=e.ownerId===Y.currentUser.uid}else alert("방을 찾을 수 없습니다."),r.push("/")},d=()=>{r.push("/")},u=async()=>{const s=Y.currentUser,t=(0,N.H9)(W,"rooms",e.roomId);await(0,N.mZ)(t,{participants:(0,N.C3)(s.uid)}),await(0,N.mZ)((0,N.H9)(W,"users",s.uid),{joinedRooms:(0,N.C3)(e.roomId)});const a=await(0,N.x7)(t);a.exists()&&0===a.data().participants.length&&await(0,N.kd)(t),r.push("/")},m=e=>{l.value=e.target.files[0]},p=e=>e.replace(/[^a-z0-9_.-]/gi,"_").toLowerCase(),v=async()=>{if(!l.value)return;const s=p(l.value.name),t=(0,$.KR)(ee,`rooms/${e.roomId}/${s}`);await(0,$.D)(t,l.value);const i=await(0,$.qk)(t),n=(0,N.H9)(W,"rooms",e.roomId),o={id:Date.now().toString(),url:i,name:s};await(0,N.mZ)(n,{gallery:(0,N.hq)(o)}),a.value.push(o),l.value=null,alert("사진이 업로드 되었습니다.")},f=()=>{confirm("정말 방을 퇴장하시겠습니까?")&&u()},h=(e,s)=>{confirm("이 사진을 삭제하시겠습니까?")&&k(e,s)},k=async(s,t)=>{const i=a.value.find((e=>e.id===s));if(!i)return;const l=(0,$.KR)(ee,`rooms/${e.roomId}/${t}`);await(0,$.XR)(l);const n=(0,N.H9)(W,"rooms",e.roomId);await(0,N.mZ)(n,{gallery:(0,N.C3)(i)}),a.value=a.value.filter((e=>e.id!==s)),alert("사진이 삭제되었습니다.")};return(0,i.sV)((()=>{c()})),{roomName:s,participants:t,galleryImages:a,selectedFile:l,onFileChange:m,uploadPhoto:v,confirmDelete:h,deletePhoto:k,leaveRoom:u,isOwner:n,ownerId:o,goToMain:d,confirmLeaveRoom:f}}};const _l=(0,g.A)(Il,[["render",Cl],["__scopeId","data-v-1879d679"]]);var El=_l;const Pl=[{path:"/",name:"home",component:Js},{path:"/RoomSetting",name:"roomSetting",component:Ct},{path:"/UserSetting",name:"userSetting",component:ca},{path:"/CreateAccount",name:"createAccount",component:qa},{path:"/Friend",name:"friend",component:qi},{path:"/room/:roomId",name:"RoomView",component:El,props:!0}],Fl=(0,U.aE)({history:(0,U.LA)("/"),routes:Pl});var Xl=Fl;(0,a.Ef)(X).use(Xl).mount("#app")},8560:function(e,s,t){e.exports=t.p+"img/lidgelogo.2d498f33.png"}},s={};function t(a){var i=s[a];if(void 0!==i)return i.exports;var l=s[a]={exports:{}};return e[a].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(s,a,i,l){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],l=e[d][2];for(var o=!0,r=0;r<a.length;r++)(!1&l||n>=l)&&Object.keys(t.O).every((function(e){return t.O[e](a[r])}))?a.splice(r--,1):(o=!1,l<n&&(n=l));if(o){e.splice(d--,1);var c=i();void 0!==c&&(s=c)}}return s}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,i,l]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(s){return 0===e[s]};var s=function(s,a){var i,l,n=a[0],o=a[1],r=a[2],c=0;if(n.some((function(s){return 0!==e[s]}))){for(i in o)t.o(o,i)&&(t.m[i]=o[i]);if(r)var d=r(t)}for(s&&s(a);c<n.length;c++)l=n[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(d)},a=self["webpackChunkvuelearn"]=self["webpackChunkvuelearn"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(4992)}));a=t.O(a)})();
//# sourceMappingURL=app.b946bb91.js.map